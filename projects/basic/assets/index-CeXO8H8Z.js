(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();function Ja(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var hi={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Xa=hi.exports,gr;function th(){return gr||(gr=1,function(a,e){(function(n,r){r(e)})(Xa,function(n){var r="1.9.4";function u(t){var i,s,o,l;for(s=1,o=arguments.length;s<o;s++){l=arguments[s];for(i in l)t[i]=l[i]}return t}var d=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function c(t,i){var s=Array.prototype.slice;if(t.bind)return t.bind.apply(t,s.call(arguments,1));var o=s.call(arguments,2);return function(){return t.apply(i,o.length?o.concat(s.call(arguments)):arguments)}}var _=0;function v(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function w(t,i,s){var o,l,f,p;return p=function(){o=!1,l&&(f.apply(s,l),l=!1)},f=function(){o?l=arguments:(t.apply(s,arguments),setTimeout(p,i),o=!0)},f}function y(t,i,s){var o=i[1],l=i[0],f=o-l;return t===o&&s?t:((t-l)%f+f)%f+l}function T(){return!1}function C(t,i){if(i===!1)return t;var s=Math.pow(10,i===void 0?6:i);return Math.round(t*s)/s}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return q(t).split(/\s+/)}function I(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?d(t.options):{});for(var s in i)t.options[s]=i[s];return t.options}function Q(t,i,s){var o=[];for(var l in t)o.push(encodeURIComponent(s?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!i||i.indexOf("?")===-1?"?":"&")+o.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function U(t,i){return t.replace(F,function(s,o){var l=i[o];if(l===void 0)throw new Error("No value provided for variable "+s);return typeof l=="function"&&(l=l(i)),l})}var O=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ot(t,i){for(var s=0;s<t.length;s++)if(t[s]===i)return s;return-1}var ee="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _t(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var qt=0;function Pt(t){var i=+new Date,s=Math.max(0,16-(i-qt));return qt=i+s,window.setTimeout(t,s)}var lt=window.requestAnimationFrame||_t("RequestAnimationFrame")||Pt,ut=window.cancelAnimationFrame||_t("CancelAnimationFrame")||_t("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function at(t,i,s){if(s&&lt===Pt)t.call(i);else return lt.call(window,c(t,i))}function mt(t){t&&ut.call(window,t)}var So={__proto__:null,extend:u,create:d,bind:c,get lastId(){return _},stamp:v,throttle:w,wrapNum:y,falseFn:T,formatNum:C,trim:q,splitWords:H,setOptions:I,getParamString:Q,template:U,isArray:O,indexOf:ot,emptyImageUrl:ee,requestFn:lt,cancelFn:ut,requestAnimFrame:at,cancelAnimFrame:mt};function $t(){}$t.extend=function(t){var i=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},s=i.__super__=this.prototype,o=d(s);o.constructor=i,i.prototype=o;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(i[l]=this[l]);return t.statics&&u(i,t.statics),t.includes&&(Eo(t.includes),u.apply(null,[o].concat(t.includes))),u(o,t),delete o.statics,delete o.includes,o.options&&(o.options=s.options?d(s.options):{},u(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){s.callInitHooks&&s.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,p=o._initHooks.length;f<p;f++)o._initHooks[f].call(this)}},i},$t.include=function(t){var i=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},$t.mergeOptions=function(t){return u(this.prototype.options,t),this},$t.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),s=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(s),this};function Eo(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=O(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var pt={on:function(t,i,s){if(typeof t=="object")for(var o in t)this._on(o,t[o],i);else{t=H(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],i,s)}return this},off:function(t,i,s){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var o in t)this._off(o,t[o],i);else{t=H(t);for(var l=arguments.length===1,f=0,p=t.length;f<p;f++)l?this._off(t[f]):this._off(t[f],i,s)}return this},_on:function(t,i,s,o){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,s)===!1){s===this&&(s=void 0);var l={fn:i,ctx:s};o&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,i,s){var o,l,f;if(this._events&&(o=this._events[t],!!o)){if(arguments.length===1){if(this._firingCount)for(l=0,f=o.length;l<f;l++)o[l].fn=T;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var p=this._listens(t,i,s);if(p!==!1){var m=o[p];this._firingCount&&(m.fn=T,this._events[t]=o=o.slice()),o.splice(p,1)}}},fire:function(t,i,s){if(!this.listens(t,s))return this;var o=u({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,p=l.length;f<p;f++){var m=l[f],g=m.fn;m.once&&this.off(t,g,m.ctx),g.call(m.ctx||this,o)}this._firingCount--}}return s&&this._propagateEvent(o),this},listens:function(t,i,s,o){typeof t!="string"&&console.warn('"string" type argument expected');var l=i;typeof i!="function"&&(o=!!i,l=void 0,s=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,l,s)!==!1)return!0;if(o){for(var p in this._eventParents)if(this._eventParents[p].listens(t,i,s,o))return!0}return!1},_listens:function(t,i,s){if(!this._events)return!1;var o=this._events[t]||[];if(!i)return!!o.length;s===this&&(s=void 0);for(var l=0,f=o.length;l<f;l++)if(o[l].fn===i&&o[l].ctx===s)return l;return!1},once:function(t,i,s){if(typeof t=="object")for(var o in t)this._on(o,t[o],i,!0);else{t=H(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],i,s,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[v(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[v(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};pt.addEventListener=pt.on,pt.removeEventListener=pt.clearAllEventListeners=pt.off,pt.addOneTimeEventListener=pt.once,pt.fireEvent=pt.fire,pt.hasEventListeners=pt.listens;var qe=$t.extend(pt);function k(t,i,s){this.x=s?Math.round(t):t,this.y=s?Math.round(i):i}var os=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(M(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(M(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new k(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new k(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=os(this.x),this.y=os(this.y),this},distanceTo:function(t){t=M(t);var i=t.x-this.x,s=t.y-this.y;return Math.sqrt(i*i+s*s)},equals:function(t){return t=M(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=M(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+C(this.x)+", "+C(this.y)+")"}};function M(t,i,s){return t instanceof k?t:O(t)?new k(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new k(t.x,t.y):new k(t,i,s)}function Y(t,i){if(t)for(var s=i?[t,i]:t,o=0,l=s.length;o<l;o++)this.extend(s[o])}Y.prototype={extend:function(t){var i,s;if(!t)return this;if(t instanceof k||typeof t[0]=="number"||"x"in t)i=s=M(t);else if(t=ct(t),i=t.min,s=t.max,!i||!s)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=s.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(s.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(s.y,this.max.y)),this},getCenter:function(t){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,s;return typeof t[0]=="number"||t instanceof k?t=M(t):t=ct(t),t instanceof Y?(i=t.min,s=t.max):i=s=t,i.x>=this.min.x&&s.x<=this.max.x&&i.y>=this.min.y&&s.y<=this.max.y},intersects:function(t){t=ct(t);var i=this.min,s=this.max,o=t.min,l=t.max,f=l.x>=i.x&&o.x<=s.x,p=l.y>=i.y&&o.y<=s.y;return f&&p},overlaps:function(t){t=ct(t);var i=this.min,s=this.max,o=t.min,l=t.max,f=l.x>i.x&&o.x<s.x,p=l.y>i.y&&o.y<s.y;return f&&p},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,s=this.max,o=Math.abs(i.x-s.x)*t,l=Math.abs(i.y-s.y)*t;return ct(M(i.x-o,i.y-l),M(s.x+o,s.y+l))},equals:function(t){return t?(t=ct(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ct(t,i){return!t||t instanceof Y?t:new Y(t,i)}function ft(t,i){if(t)for(var s=i?[t,i]:t,o=0,l=s.length;o<l;o++)this.extend(s[o])}ft.prototype={extend:function(t){var i=this._southWest,s=this._northEast,o,l;if(t instanceof V)o=t,l=t;else if(t instanceof ft){if(o=t._southWest,l=t._northEast,!o||!l)return this}else return t?this.extend(R(t)||J(t)):this;return!i&&!s?(this._southWest=new V(o.lat,o.lng),this._northEast=new V(l.lat,l.lng)):(i.lat=Math.min(o.lat,i.lat),i.lng=Math.min(o.lng,i.lng),s.lat=Math.max(l.lat,s.lat),s.lng=Math.max(l.lng,s.lng)),this},pad:function(t){var i=this._southWest,s=this._northEast,o=Math.abs(i.lat-s.lat)*t,l=Math.abs(i.lng-s.lng)*t;return new ft(new V(i.lat-o,i.lng-l),new V(s.lat+o,s.lng+l))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof V||"lat"in t?t=R(t):t=J(t);var i=this._southWest,s=this._northEast,o,l;return t instanceof ft?(o=t.getSouthWest(),l=t.getNorthEast()):o=l=t,o.lat>=i.lat&&l.lat<=s.lat&&o.lng>=i.lng&&l.lng<=s.lng},intersects:function(t){t=J(t);var i=this._southWest,s=this._northEast,o=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>=i.lat&&o.lat<=s.lat,p=l.lng>=i.lng&&o.lng<=s.lng;return f&&p},overlaps:function(t){t=J(t);var i=this._southWest,s=this._northEast,o=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>i.lat&&o.lat<s.lat,p=l.lng>i.lng&&o.lng<s.lng;return f&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=J(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function J(t,i){return t instanceof ft?t:new ft(t,i)}function V(t,i,s){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,s!==void 0&&(this.alt=+s)}V.prototype={equals:function(t,i){if(!t)return!1;t=R(t);var s=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return s<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+C(this.lat,t)+", "+C(this.lng,t)+")"},distanceTo:function(t){return ie.distance(this,R(t))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,s=i/Math.cos(Math.PI/180*this.lat);return J([this.lat-i,this.lng-s],[this.lat+i,this.lng+s])},clone:function(){return new V(this.lat,this.lng,this.alt)}};function R(t,i,s){return t instanceof V?t:O(t)&&typeof t[0]!="object"?t.length===3?new V(t[0],t[1],t[2]):t.length===2?new V(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new V(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new V(t,i,s)}var Yt={latLngToPoint:function(t,i){var s=this.projection.project(t),o=this.scale(i);return this.transformation._transform(s,o)},pointToLatLng:function(t,i){var s=this.scale(i),o=this.transformation.untransform(t,s);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,s=this.scale(t),o=this.transformation.transform(i.min,s),l=this.transformation.transform(i.max,s);return new Y(o,l)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?y(t.lng,this.wrapLng,!0):t.lng,s=this.wrapLat?y(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return new V(s,i,o)},wrapLatLngBounds:function(t){var i=t.getCenter(),s=this.wrapLatLng(i),o=i.lat-s.lat,l=i.lng-s.lng;if(o===0&&l===0)return t;var f=t.getSouthWest(),p=t.getNorthEast(),m=new V(f.lat-o,f.lng-l),g=new V(p.lat-o,p.lng-l);return new ft(m,g)}},ie=u({},Yt,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var s=Math.PI/180,o=t.lat*s,l=i.lat*s,f=Math.sin((i.lat-t.lat)*s/2),p=Math.sin((i.lng-t.lng)*s/2),m=f*f+Math.cos(o)*Math.cos(l)*p*p,g=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return this.R*g}}),as=6378137,en={R:as,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,s=this.MAX_LATITUDE,o=Math.max(Math.min(s,t.lat),-s),l=Math.sin(o*i);return new k(this.R*t.lng*i,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var i=180/Math.PI;return new V((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=as*Math.PI;return new Y([-t,-t],[t,t])}()};function nn(t,i,s,o){if(O(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=s,this._d=o}nn.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new k((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function $e(t,i,s,o){return new nn(t,i,s,o)}var sn=u({},ie,{code:"EPSG:3857",projection:en,transformation:function(){var t=.5/(Math.PI*en.R);return $e(t,.5,-t,.5)}()}),Io=u({},sn,{code:"EPSG:900913"});function hs(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ls(t,i){var s="",o,l,f,p,m,g;for(o=0,f=t.length;o<f;o++){for(m=t[o],l=0,p=m.length;l<p;l++)g=m[l],s+=(l?"L":"M")+g.x+" "+g.y;s+=i?E.svg?"z":"x":""}return s||"M0 0"}var rn=document.documentElement.style,Ti="ActiveXObject"in window,Ao=Ti&&!document.addEventListener,us="msLaunchUri"in navigator&&!("documentMode"in document),on=It("webkit"),cs=It("android"),fs=It("android 2")||It("android 3"),Oo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Co=cs&&It("Google")&&Oo<537&&!("AudioNode"in window),an=!!window.opera,ds=!us&&It("chrome"),ps=It("gecko")&&!on&&!an&&!Ti,Mo=!ds&&It("safari"),_s=It("phantom"),ms="OTransition"in rn,ko=navigator.platform.indexOf("Win")===0,gs=Ti&&"transition"in rn,hn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!fs,vs="MozPerspective"in rn,No=!window.L_DISABLE_3D&&(gs||hn||vs)&&!ms&&!_s,Ye=typeof orientation<"u"||It("mobile"),zo=Ye&&on,Bo=Ye&&hn,ys=!window.PointerEvent&&window.MSPointerEvent,xs=!!(window.PointerEvent||ys),ws="ontouchstart"in window||!!window.TouchEvent,Ro=!window.L_NO_TOUCH&&(ws||xs),Zo=Ye&&an,Do=Ye&&ps,Uo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ho=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",T,i),window.removeEventListener("testPassiveEventSupport",T,i)}catch{}return t}(),Fo=function(){return!!document.createElement("canvas").getContext}(),ln=!!(document.createElementNS&&hs("svg").createSVGRect),Wo=!!ln&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vo=!ln&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),Go=navigator.platform.indexOf("Mac")===0,qo=navigator.platform.indexOf("Linux")===0;function It(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var E={ie:Ti,ielt9:Ao,edge:us,webkit:on,android:cs,android23:fs,androidStock:Co,opera:an,chrome:ds,gecko:ps,safari:Mo,phantom:_s,opera12:ms,win:ko,ie3d:gs,webkit3d:hn,gecko3d:vs,any3d:No,mobile:Ye,mobileWebkit:zo,mobileWebkit3d:Bo,msPointer:ys,pointer:xs,touch:Ro,touchNative:ws,mobileOpera:Zo,mobileGecko:Do,retina:Uo,passiveEvents:Ho,canvas:Fo,svg:ln,vml:Vo,inlineSvg:Wo,mac:Go,linux:qo},Ps=E.msPointer?"MSPointerDown":"pointerdown",Ts=E.msPointer?"MSPointerMove":"pointermove",Ls=E.msPointer?"MSPointerUp":"pointerup",bs=E.msPointer?"MSPointerCancel":"pointercancel",un={touchstart:Ps,touchmove:Ts,touchend:Ls,touchcancel:bs},Ss={touchstart:Jo,touchmove:Li,touchend:Li,touchcancel:Li},xe={},Es=!1;function $o(t,i,s){return i==="touchstart"&&Ko(),Ss[i]?(s=Ss[i].bind(this,s),t.addEventListener(un[i],s,!1),s):(console.warn("wrong event specified:",i),T)}function Yo(t,i,s){if(!un[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(un[i],s,!1)}function jo(t){xe[t.pointerId]=t}function Qo(t){xe[t.pointerId]&&(xe[t.pointerId]=t)}function Is(t){delete xe[t.pointerId]}function Ko(){Es||(document.addEventListener(Ps,jo,!0),document.addEventListener(Ts,Qo,!0),document.addEventListener(Ls,Is,!0),document.addEventListener(bs,Is,!0),Es=!0)}function Li(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var s in xe)i.touches.push(xe[s]);i.changedTouches=[i],t(i)}}function Jo(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&nt(i),Li(t,i)}function Xo(t){var i={},s,o;for(o in t)s=t[o],i[o]=s&&s.bind?s.bind(t):s;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var ta=200;function ea(t,i){t.addEventListener("dblclick",i);var s=0,o;function l(f){if(f.detail!==1){o=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var p=ks(f);if(!(p.some(function(g){return g instanceof HTMLLabelElement&&g.attributes.for})&&!p.some(function(g){return g instanceof HTMLInputElement||g instanceof HTMLSelectElement}))){var m=Date.now();m-s<=ta?(o++,o===2&&i(Xo(f))):o=1,s=m}}}return t.addEventListener("click",l),{dblclick:i,simDblclick:l}}function ia(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var cn=Ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),je=Ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),As=je==="webkitTransition"||je==="OTransition"?je+"End":"transitionend";function Os(t){return typeof t=="string"?document.getElementById(t):t}function Qe(t,i){var s=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!s||s==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);s=o?o[i]:null}return s==="auto"?null:s}function D(t,i,s){var o=document.createElement(t);return o.className=i||"",s&&s.appendChild(o),o}function j(t){var i=t.parentNode;i&&i.removeChild(t)}function bi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function we(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function Pe(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function fn(t,i){if(t.classList!==void 0)return t.classList.contains(i);var s=Si(t);return s.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(s)}function z(t,i){if(t.classList!==void 0)for(var s=H(i),o=0,l=s.length;o<l;o++)t.classList.add(s[o]);else if(!fn(t,i)){var f=Si(t);dn(t,(f?f+" ":"")+i)}}function K(t,i){t.classList!==void 0?t.classList.remove(i):dn(t,q((" "+Si(t)+" ").replace(" "+i+" "," ")))}function dn(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function Si(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function gt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&na(t,i)}function na(t,i){var s=!1,o="DXImageTransform.Microsoft.Alpha";try{s=t.filters.item(o)}catch{if(i===1)return}i=Math.round(i*100),s?(s.Enabled=i!==100,s.Opacity=i):t.style.filter+=" progid:"+o+"(opacity="+i+")"}function Ei(t){for(var i=document.documentElement.style,s=0;s<t.length;s++)if(t[s]in i)return t[s];return!1}function ue(t,i,s){var o=i||new k(0,0);t.style[cn]=(E.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(s?" scale("+s+")":"")}function X(t,i){t._leaflet_pos=i,E.any3d?ue(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function ce(t){return t._leaflet_pos||new k(0,0)}var Ke,Je,pn;if("onselectstart"in document)Ke=function(){N(window,"selectstart",nt)},Je=function(){G(window,"selectstart",nt)};else{var Xe=Ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ke=function(){if(Xe){var t=document.documentElement.style;pn=t[Xe],t[Xe]="none"}},Je=function(){Xe&&(document.documentElement.style[Xe]=pn,pn=void 0)}}function _n(){N(window,"dragstart",nt)}function mn(){G(window,"dragstart",nt)}var Ii,gn;function vn(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Ai(),Ii=t,gn=t.style.outlineStyle,t.style.outlineStyle="none",N(window,"keydown",Ai))}function Ai(){Ii&&(Ii.style.outlineStyle=gn,Ii=void 0,gn=void 0,G(window,"keydown",Ai))}function Cs(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function yn(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var sa={__proto__:null,TRANSFORM:cn,TRANSITION:je,TRANSITION_END:As,get:Os,getStyle:Qe,create:D,remove:j,empty:bi,toFront:we,toBack:Pe,hasClass:fn,addClass:z,removeClass:K,setClass:dn,getClass:Si,setOpacity:gt,testProp:Ei,setTransform:ue,setPosition:X,getPosition:ce,get disableTextSelection(){return Ke},get enableTextSelection(){return Je},disableImageDrag:_n,enableImageDrag:mn,preventOutline:vn,restoreOutline:Ai,getSizedParentNode:Cs,getScale:yn};function N(t,i,s,o){if(i&&typeof i=="object")for(var l in i)wn(t,l,i[l],s);else{i=H(i);for(var f=0,p=i.length;f<p;f++)wn(t,i[f],s,o)}return this}var At="_leaflet_events";function G(t,i,s,o){if(arguments.length===1)Ms(t),delete t[At];else if(i&&typeof i=="object")for(var l in i)Pn(t,l,i[l],s);else if(i=H(i),arguments.length===2)Ms(t,function(m){return ot(i,m)!==-1});else for(var f=0,p=i.length;f<p;f++)Pn(t,i[f],s,o);return this}function Ms(t,i){for(var s in t[At]){var o=s.split(/\d/)[0];(!i||i(o))&&Pn(t,o,null,null,s)}}var xn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wn(t,i,s,o){var l=i+v(s)+(o?"_"+v(o):"");if(t[At]&&t[At][l])return this;var f=function(m){return s.call(o||t,m||window.event)},p=f;!E.touchNative&&E.pointer&&i.indexOf("touch")===0?f=$o(t,i,f):E.touch&&i==="dblclick"?f=ea(t,f):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(xn[i]||i,f,E.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(f=function(m){m=m||window.event,Ln(t,m)&&p(m)},t.addEventListener(xn[i],f,!1)):t.addEventListener(i,p,!1):t.attachEvent("on"+i,f),t[At]=t[At]||{},t[At][l]=f}function Pn(t,i,s,o,l){l=l||i+v(s)+(o?"_"+v(o):"");var f=t[At]&&t[At][l];if(!f)return this;!E.touchNative&&E.pointer&&i.indexOf("touch")===0?Yo(t,i,f):E.touch&&i==="dblclick"?ia(t,f):"removeEventListener"in t?t.removeEventListener(xn[i]||i,f,!1):t.detachEvent("on"+i,f),t[At][l]=null}function fe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Tn(t){return wn(t,"wheel",fe),this}function ti(t){return N(t,"mousedown touchstart dblclick contextmenu",fe),t._leaflet_disable_click=!0,this}function nt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function de(t){return nt(t),fe(t),this}function ks(t){if(t.composedPath)return t.composedPath();for(var i=[],s=t.target;s;)i.push(s),s=s.parentNode;return i}function Ns(t,i){if(!i)return new k(t.clientX,t.clientY);var s=yn(i),o=s.boundingClientRect;return new k((t.clientX-o.left)/s.x-i.clientLeft,(t.clientY-o.top)/s.y-i.clientTop)}var ra=E.linux&&E.chrome?window.devicePixelRatio:E.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zs(t){return E.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ra:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Ln(t,i){var s=i.relatedTarget;if(!s)return!0;try{for(;s&&s!==t;)s=s.parentNode}catch{return!1}return s!==t}var oa={__proto__:null,on:N,off:G,stopPropagation:fe,disableScrollPropagation:Tn,disableClickPropagation:ti,preventDefault:nt,stop:de,getPropagationPath:ks,getMousePosition:Ns,getWheelDelta:zs,isExternalTarget:Ln,addListener:N,removeListener:G},Bs=qe.extend({run:function(t,i,s,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=s||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=ce(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=at(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,s=this._duration*1e3;i<s?this._runFrame(this._easeOut(i/s),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var s=this._startPos.add(this._offset.multiplyBy(t));i&&s._round(),X(this._el,s),this.fire("step")},_complete:function(){mt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Z=qe.extend({options:{crs:sn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=I(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(R(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=je&&E.any3d&&!E.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),N(this._proxy,As,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,s){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(R(t),i,this.options.maxBounds),s=s||{},this._stop(),this._loaded&&!s.reset&&s!==!0){s.animate!==void 0&&(s.zoom=u({animate:s.animate},s.zoom),s.pan=u({animate:s.animate,duration:s.duration},s.pan));var o=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,s.zoom):this._tryAnimatedPan(t,s.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,s.pan&&s.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,s){var o=this.getZoomScale(i),l=this.getSize().divideBy(2),f=t instanceof k?t:this.latLngToContainerPoint(t),p=f.subtract(l).multiplyBy(1-1/o),m=this.containerPointToLatLng(l.add(p));return this.setView(m,i,{zoom:s})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():J(t);var s=M(i.paddingTopLeft||i.padding||[0,0]),o=M(i.paddingBottomRight||i.padding||[0,0]),l=this.getBoundsZoom(t,!1,s.add(o));if(l=typeof i.maxZoom=="number"?Math.min(i.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var f=o.subtract(s).divideBy(2),p=this.project(t.getSouthWest(),l),m=this.project(t.getNorthEast(),l),g=this.unproject(p.add(m).divideBy(2).add(f),l);return{center:g,zoom:l}},fitBounds:function(t,i){if(t=J(t),!t.isValid())throw new Error("Bounds are not valid.");var s=this._getBoundsCenterZoom(t,i);return this.setView(s.center,s.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=M(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Bs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){z(this._mapPane,"leaflet-pan-anim");var s=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,s,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,s){if(s=s||{},s.animate===!1||!E.any3d)return this.setView(t,i,s);this._stop();var o=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),p=this._zoom;t=R(t),i=i===void 0?p:i;var m=Math.max(f.x,f.y),g=m*this.getZoomScale(p,i),x=l.distanceTo(o)||1,b=1.42,A=b*b;function B(tt){var Hi=tt?-1:1,Ya=tt?g:m,ja=g*g-m*m+Hi*A*A*x*x,Qa=2*Ya*A*x,zn=ja/Qa,mr=Math.sqrt(zn*zn+1)-zn,Ka=mr<1e-9?-18:Math.log(mr);return Ka}function ht(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function et(tt){return(Math.exp(tt)+Math.exp(-tt))/2}function yt(tt){return ht(tt)/et(tt)}var dt=B(0);function Ie(tt){return m*(et(dt)/et(dt+b*tt))}function Va(tt){return m*(et(dt)*yt(dt+b*tt)-ht(dt))/A}function Ga(tt){return 1-Math.pow(1-tt,1.5)}var qa=Date.now(),pr=(B(1)-dt)/b,$a=s.duration?1e3*s.duration:1e3*pr*.8;function _r(){var tt=(Date.now()-qa)/$a,Hi=Ga(tt)*pr;tt<=1?(this._flyToFrame=at(_r,this),this._move(this.unproject(o.add(l.subtract(o).multiplyBy(Va(Hi)/x)),p),this.getScaleZoom(m/Ie(Hi),p),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,s.noMoveStart),_r.call(this),this},flyToBounds:function(t,i){var s=this._getBoundsCenterZoom(t,i);return this.flyTo(s.center,s.zoom,i)},setMaxBounds:function(t){return t=J(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var s=this.getCenter(),o=this._limitCenter(s,this._zoom,J(t));return s.equals(o)||this.panTo(o,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var s=M(i.paddingTopLeft||i.padding||[0,0]),o=M(i.paddingBottomRight||i.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(t),p=this.getPixelBounds(),m=ct([p.min.add(s),p.max.subtract(o)]),g=m.getSize();if(!m.contains(f)){this._enforcingBounds=!0;var x=f.subtract(m.getCenter()),b=m.extend(f).getSize().subtract(g);l.x+=x.x<0?-b.x:b.x,l.y+=x.y<0?-b.y:b.y,this.panTo(this.unproject(l),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var s=this.getSize(),o=i.divideBy(2).round(),l=s.divideBy(2).round(),f=o.subtract(l);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:s}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=c(this._handleGeolocationResponse,this),s=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,s,t):navigator.geolocation.getCurrentPosition(i,s,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,s=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+s+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,s=t.coords.longitude,o=new V(i,s),l=o.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var p=this.getBoundsZoom(l);this.setView(o,f.maxZoom?Math.min(p,f.maxZoom):p)}var m={latlng:o,bounds:l,timestamp:t.timestamp};for(var g in t.coords)typeof t.coords[g]=="number"&&(m[g]=t.coords[g]);this.fire("locationfound",m)}},addHandler:function(t,i){if(!i)return this;var s=this[t]=new i(this);return this._handlers.push(s),this.options[t]&&s.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),j(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(mt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)j(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var s="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=D("div",s,i||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),s=this.unproject(t.getTopRight());return new ft(i,s)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,s){t=J(t),s=M(s||[0,0]);var o=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),p=t.getNorthWest(),m=t.getSouthEast(),g=this.getSize().subtract(s),x=ct(this.project(m,o),this.project(p,o)).getSize(),b=E.any3d?this.options.zoomSnap:1,A=g.x/x.x,B=g.y/x.y,ht=i?Math.max(A,B):Math.min(A,B);return o=this.getScaleZoom(ht,o),b&&(o=Math.round(o/(b/100))*(b/100),o=i?Math.ceil(o/b)*b:Math.floor(o/b)*b),Math.max(l,Math.min(f,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var s=this._getTopLeftPoint(t,i);return new Y(s,s.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var s=this.options.crs;return i=i===void 0?this._zoom:i,s.scale(t)/s.scale(i)},getScaleZoom:function(t,i){var s=this.options.crs;i=i===void 0?this._zoom:i;var o=s.zoom(t*s.scale(i));return isNaN(o)?1/0:o},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(R(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(M(t),i)},layerPointToLatLng:function(t){var i=M(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(R(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(R(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(J(t))},distance:function(t,i){return this.options.crs.distance(R(t),R(i))},containerPointToLayerPoint:function(t){return M(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return M(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(M(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(R(t)))},mouseEventToContainerPoint:function(t){return Ns(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Os(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");N(i,"scroll",this._onScroll,this),this._containerId=v(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&E.any3d,z(t,"leaflet-container"+(E.touch?" leaflet-touch":"")+(E.retina?" leaflet-retina":"")+(E.ielt9?" leaflet-oldie":"")+(E.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=Qe(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),X(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(z(t.markerPane,"leaflet-zoom-hide"),z(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,s){X(this._mapPane,new k(0,0));var o=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var l=this._zoom!==i;this._moveStart(l,s)._move(t,i)._moveEnd(l),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,s,o){i===void 0&&(i=this._zoom);var l=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),o?s&&s.pinch&&this.fire("zoom",s):((l||s&&s.pinch)&&this.fire("zoom",s),this.fire("move",s)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return mt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){X(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[v(this._container)]=this;var i=t?G:N;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),E.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){mt(this._resizeRequest),this._resizeRequest=at(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var s=[],o,l=i==="mouseout"||i==="mouseover",f=t.target||t.srcElement,p=!1;f;){if(o=this._targets[v(f)],o&&(i==="click"||i==="preclick")&&this._draggableMoved(o)){p=!0;break}if(o&&o.listens(i,!0)&&(l&&!Ln(f,t)||(s.push(o),l))||f===this._container)break;f=f.parentNode}return!s.length&&!p&&!l&&this.listens(i,!0)&&(s=[this]),s},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var s=t.type;s==="mousedown"&&vn(i),this._fireDOMEvent(t,s)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,s){if(t.type==="click"){var o=u({},t);o.type="preclick",this._fireDOMEvent(o,o.type,s)}var l=this._findEventTargets(t,i);if(s){for(var f=[],p=0;p<s.length;p++)s[p].listens(i,!0)&&f.push(s[p]);l=f.concat(l)}if(l.length){i==="contextmenu"&&nt(t);var m=l[0],g={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var x=m.getLatLng&&(!m._radius||m._radius<=10);g.containerPoint=x?this.latLngToContainerPoint(m.getLatLng()):this.mouseEventToContainerPoint(t),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=x?m.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(p=0;p<l.length;p++)if(l[p].fire(i,g,!0),g.originalEvent._stopped||l[p].options.bubblingMouseEvents===!1&&ot(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return ce(this._mapPane)||new k(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var s=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return s.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var s=this.getSize()._divideBy(2);return this.project(t,i)._subtract(s)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,s){var o=this._getNewPixelOrigin(s,i);return this.project(t,i)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,i,s){var o=this._getNewPixelOrigin(s,i);return ct([this.project(t.getSouthWest(),i)._subtract(o),this.project(t.getNorthWest(),i)._subtract(o),this.project(t.getSouthEast(),i)._subtract(o),this.project(t.getNorthEast(),i)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,s){if(!s)return t;var o=this.project(t,i),l=this.getSize().divideBy(2),f=new Y(o.subtract(l),o.add(l)),p=this._getBoundsOffset(f,s,i);return Math.abs(p.x)<=1&&Math.abs(p.y)<=1?t:this.unproject(o.add(p),i)},_limitOffset:function(t,i){if(!i)return t;var s=this.getPixelBounds(),o=new Y(s.min.add(t),s.max.add(t));return t.add(this._getBoundsOffset(o,i))},_getBoundsOffset:function(t,i,s){var o=ct(this.project(i.getNorthEast(),s),this.project(i.getSouthWest(),s)),l=o.min.subtract(t.min),f=o.max.subtract(t.max),p=this._rebound(l.x,-f.x),m=this._rebound(l.y,-f.y);return new k(p,m)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),s=this.getMaxZoom(),o=E.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(i,Math.min(s,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){K(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var s=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(s)?!1:(this.panBy(s,i),!0)},_createAnimProxy:function(){var t=this._proxy=D("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var s=cn,o=this._proxy.style[s];ue(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),o===this._proxy.style[s]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){j(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();ue(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,s){if(this._animatingZoom)return!0;if(s=s||{},!this._zoomAnimated||s.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(i),l=this._getCenterOffset(t)._divideBy(1-1/o);return s.animate!==!0&&!this.getSize().contains(l)?!1:(at(function(){this._moveStart(!0,s.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,s,o){this._mapPane&&(s&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,z(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&K(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function aa(t,i){return new Z(t,i)}var Tt=$t.extend({options:{position:"topright"},initialize:function(t){I(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),s=this.getPosition(),o=t._controlCorners[s];return z(i,"leaflet-control"),s.indexOf("bottom")!==-1?o.insertBefore(i,o.firstChild):o.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(j(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ei=function(t){return new Tt(t)};Z.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",s=this._controlContainer=D("div",i+"control-container",this._container);function o(l,f){var p=i+l+" "+i+f;t[l+f]=D("div",p,s)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)j(this._controlCorners[t]);j(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Rs=Tt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,s,o){return s<o?-1:o<s?1:0}},initialize:function(t,i,s){I(this,s),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in i)this._addLayer(i[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Tt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(v(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){z(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(z(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):K(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return K(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=D("div",t),s=this.options.collapsed;i.setAttribute("aria-haspopup",!0),ti(i),Tn(i);var o=this._section=D("section",t+"-list");s&&(this._map.on("click",this.collapse,this),N(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=D("a",t+"-toggle",i);l.href="#",l.title="Layers",l.setAttribute("role","button"),N(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){nt(f),this._expandSafely()}},this),s||this.expand(),this._baseLayersList=D("div",t+"-base",o),this._separator=D("div",t+"-separator",o),this._overlaysList=D("div",t+"-overlays",o),i.appendChild(o)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&v(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,s){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:s}),this.options.sortLayers&&this._layers.sort(c(function(o,l){return this.options.sortFunction(o.layer,l.layer,o.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bi(this._baseLayersList),bi(this._overlaysList),this._layerControlInputs=[];var t,i,s,o,l=0;for(s=0;s<this._layers.length;s++)o=this._layers[s],this._addItem(o),i=i||o.overlay,t=t||!o.overlay,l+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(v(t.target)),s=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;s&&this._map.fire(s,i)},_createRadioElement:function(t,i){var s='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=s,o.firstChild},_addItem:function(t){var i=document.createElement("label"),s=this._map.hasLayer(t.layer),o;t.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=s):o=this._createRadioElement("leaflet-base-layers_"+v(this),s),this._layerControlInputs.push(o),o.layerId=v(t.layer),N(o,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var f=document.createElement("span");i.appendChild(f),f.appendChild(o),f.appendChild(l);var p=t.overlay?this._overlaysList:this._baseLayersList;return p.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,s,o=[],l=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)i=t[f],s=this._getLayer(i.layerId).layer,i.checked?o.push(s):i.checked||l.push(s);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<o.length;f++)this._map.hasLayer(o[f])||this._map.addLayer(o[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,s,o=this._map.getZoom(),l=t.length-1;l>=0;l--)i=t[l],s=this._getLayer(i.layerId).layer,i.disabled=s.options.minZoom!==void 0&&o<s.options.minZoom||s.options.maxZoom!==void 0&&o>s.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,N(t,"click",nt),this.expand();var i=this;setTimeout(function(){G(t,"click",nt),i._preventClick=!1})}}),ha=function(t,i,s){return new Rs(t,i,s)},bn=Tt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",s=D("div",i+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,i+"-in",s,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,i+"-out",s,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),s},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,s,o,l){var f=D("a",s,o);return f.innerHTML=t,f.href="#",f.title=i,f.setAttribute("role","button"),f.setAttribute("aria-label",i),ti(f),N(f,"click",de),N(f,"click",l,this),N(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";K(this._zoomInButton,i),K(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(z(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(z(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});Z.mergeOptions({zoomControl:!0}),Z.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bn,this.addControl(this.zoomControl))});var la=function(t){return new bn(t)},Zs=Tt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",s=D("div",i),o=this.options;return this._addScales(o,i+"-line",s),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),s},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,s){t.metric&&(this._mScale=D("div",i,s)),t.imperial&&(this._iScale=D("div",i,s))},_update:function(){var t=this._map,i=t.getSize().y/2,s=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(s)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),s=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,s,i/t)},_updateImperial:function(t){var i=t*3.2808399,s,o,l;i>5280?(s=i/5280,o=this._getRoundNum(s),this._updateScale(this._iScale,o+" mi",o/s)):(l=this._getRoundNum(i),this._updateScale(this._iScale,l+" ft",l/i))},_updateScale:function(t,i,s){t.style.width=Math.round(this.options.maxWidth*s)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),s=t/i;return s=s>=10?10:s>=5?5:s>=3?3:s>=2?2:1,i*s}}),ua=function(t){return new Zs(t)},ca='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Sn=Tt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(E.inlineSvg?ca+" ":"")+"Leaflet</a>"},initialize:function(t){I(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=D("div","leaflet-control-attribution"),ti(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var s=[];this.options.prefix&&s.push(this.options.prefix),t.length&&s.push(t.join(", ")),this._container.innerHTML=s.join(' <span aria-hidden="true">|</span> ')}}});Z.mergeOptions({attributionControl:!0}),Z.addInitHook(function(){this.options.attributionControl&&new Sn().addTo(this)});var fa=function(t){return new Sn(t)};Tt.Layers=Rs,Tt.Zoom=bn,Tt.Scale=Zs,Tt.Attribution=Sn,ei.layers=ha,ei.zoom=la,ei.scale=ua,ei.attribution=fa;var Ot=$t.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ot.addTo=function(t,i){return t.addHandler(i,this),this};var da={Events:pt},Ds=E.touch?"touchstart mousedown":"mousedown",ne=qe.extend({options:{clickTolerance:3},initialize:function(t,i,s,o){I(this,o),this._element=t,this._dragStartTarget=i||t,this._preventOutline=s},enable:function(){this._enabled||(N(this._dragStartTarget,Ds,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ne._dragging===this&&this.finishDrag(!0),G(this._dragStartTarget,Ds,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!fn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ne._dragging===this&&this.finishDrag();return}if(!(ne._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ne._dragging=this,this._preventOutline&&vn(this._element),_n(),Ke(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,s=Cs(this._element);this._startPoint=new k(i.clientX,i.clientY),this._startPos=ce(this._element),this._parentScale=yn(s);var o=t.type==="mousedown";N(document,o?"mousemove":"touchmove",this._onMove,this),N(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,s=new k(i.clientX,i.clientY)._subtract(this._startPoint);!s.x&&!s.y||Math.abs(s.x)+Math.abs(s.y)<this.options.clickTolerance||(s.x/=this._parentScale.x,s.y/=this._parentScale.y,nt(t),this._moved||(this.fire("dragstart"),this._moved=!0,z(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),z(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(s),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),X(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){K(document.body,"leaflet-dragging"),this._lastTarget&&(K(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),G(document,"mousemove touchmove",this._onMove,this),G(document,"mouseup touchend touchcancel",this._onUp,this),mn(),Je();var i=this._moved&&this._moving;this._moving=!1,ne._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Us(t,i,s){var o,l=[1,4,2,8],f,p,m,g,x,b,A,B;for(f=0,b=t.length;f<b;f++)t[f]._code=pe(t[f],i);for(m=0;m<4;m++){for(A=l[m],o=[],f=0,b=t.length,p=b-1;f<b;p=f++)g=t[f],x=t[p],g._code&A?x._code&A||(B=Oi(x,g,A,i,s),B._code=pe(B,i),o.push(B)):(x._code&A&&(B=Oi(x,g,A,i,s),B._code=pe(B,i),o.push(B)),o.push(g));t=o}return t}function Hs(t,i){var s,o,l,f,p,m,g,x,b;if(!t||t.length===0)throw new Error("latlngs not passed");vt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var A=R([0,0]),B=J(t),ht=B.getNorthWest().distanceTo(B.getSouthWest())*B.getNorthEast().distanceTo(B.getNorthWest());ht<1700&&(A=En(t));var et=t.length,yt=[];for(s=0;s<et;s++){var dt=R(t[s]);yt.push(i.project(R([dt.lat-A.lat,dt.lng-A.lng])))}for(m=g=x=0,s=0,o=et-1;s<et;o=s++)l=yt[s],f=yt[o],p=l.y*f.x-f.y*l.x,g+=(l.x+f.x)*p,x+=(l.y+f.y)*p,m+=p*3;m===0?b=yt[0]:b=[g/m,x/m];var Ie=i.unproject(M(b));return R([Ie.lat+A.lat,Ie.lng+A.lng])}function En(t){for(var i=0,s=0,o=0,l=0;l<t.length;l++){var f=R(t[l]);i+=f.lat,s+=f.lng,o++}return R([i/o,s/o])}var pa={__proto__:null,clipPolygon:Us,polygonCenter:Hs,centroid:En};function Fs(t,i){if(!i||!t.length)return t.slice();var s=i*i;return t=ga(t,s),t=ma(t,s),t}function Ws(t,i,s){return Math.sqrt(ii(t,i,s,!0))}function _a(t,i,s){return ii(t,i,s)}function ma(t,i){var s=t.length,o=typeof Uint8Array<"u"?Uint8Array:Array,l=new o(s);l[0]=l[s-1]=1,In(t,l,i,0,s-1);var f,p=[];for(f=0;f<s;f++)l[f]&&p.push(t[f]);return p}function In(t,i,s,o,l){var f=0,p,m,g;for(m=o+1;m<=l-1;m++)g=ii(t[m],t[o],t[l],!0),g>f&&(p=m,f=g);f>s&&(i[p]=1,In(t,i,s,o,p),In(t,i,s,p,l))}function ga(t,i){for(var s=[t[0]],o=1,l=0,f=t.length;o<f;o++)va(t[o],t[l])>i&&(s.push(t[o]),l=o);return l<f-1&&s.push(t[f-1]),s}var Vs;function Gs(t,i,s,o,l){var f=o?Vs:pe(t,s),p=pe(i,s),m,g,x;for(Vs=p;;){if(!(f|p))return[t,i];if(f&p)return!1;m=f||p,g=Oi(t,i,m,s,l),x=pe(g,s),m===f?(t=g,f=x):(i=g,p=x)}}function Oi(t,i,s,o,l){var f=i.x-t.x,p=i.y-t.y,m=o.min,g=o.max,x,b;return s&8?(x=t.x+f*(g.y-t.y)/p,b=g.y):s&4?(x=t.x+f*(m.y-t.y)/p,b=m.y):s&2?(x=g.x,b=t.y+p*(g.x-t.x)/f):s&1&&(x=m.x,b=t.y+p*(m.x-t.x)/f),new k(x,b,l)}function pe(t,i){var s=0;return t.x<i.min.x?s|=1:t.x>i.max.x&&(s|=2),t.y<i.min.y?s|=4:t.y>i.max.y&&(s|=8),s}function va(t,i){var s=i.x-t.x,o=i.y-t.y;return s*s+o*o}function ii(t,i,s,o){var l=i.x,f=i.y,p=s.x-l,m=s.y-f,g=p*p+m*m,x;return g>0&&(x=((t.x-l)*p+(t.y-f)*m)/g,x>1?(l=s.x,f=s.y):x>0&&(l+=p*x,f+=m*x)),p=t.x-l,m=t.y-f,o?p*p+m*m:new k(l,f)}function vt(t){return!O(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function qs(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vt(t)}function $s(t,i){var s,o,l,f,p,m,g,x;if(!t||t.length===0)throw new Error("latlngs not passed");vt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var b=R([0,0]),A=J(t),B=A.getNorthWest().distanceTo(A.getSouthWest())*A.getNorthEast().distanceTo(A.getNorthWest());B<1700&&(b=En(t));var ht=t.length,et=[];for(s=0;s<ht;s++){var yt=R(t[s]);et.push(i.project(R([yt.lat-b.lat,yt.lng-b.lng])))}for(s=0,o=0;s<ht-1;s++)o+=et[s].distanceTo(et[s+1])/2;if(o===0)x=et[0];else for(s=0,f=0;s<ht-1;s++)if(p=et[s],m=et[s+1],l=p.distanceTo(m),f+=l,f>o){g=(f-o)/l,x=[m.x-g*(m.x-p.x),m.y-g*(m.y-p.y)];break}var dt=i.unproject(M(x));return R([dt.lat+b.lat,dt.lng+b.lng])}var ya={__proto__:null,simplify:Fs,pointToSegmentDistance:Ws,closestPointOnSegment:_a,clipSegment:Gs,_getEdgeIntersection:Oi,_getBitCode:pe,_sqClosestPointOnSegment:ii,isFlat:vt,_flat:qs,polylineCenter:$s},An={project:function(t){return new k(t.lng,t.lat)},unproject:function(t){return new V(t.y,t.x)},bounds:new Y([-180,-90],[180,90])},On={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Y([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,s=this.R,o=t.lat*i,l=this.R_MINOR/s,f=Math.sqrt(1-l*l),p=f*Math.sin(o),m=Math.tan(Math.PI/4-o/2)/Math.pow((1-p)/(1+p),f/2);return o=-s*Math.log(Math.max(m,1e-10)),new k(t.lng*i*s,o)},unproject:function(t){for(var i=180/Math.PI,s=this.R,o=this.R_MINOR/s,l=Math.sqrt(1-o*o),f=Math.exp(-t.y/s),p=Math.PI/2-2*Math.atan(f),m=0,g=.1,x;m<15&&Math.abs(g)>1e-7;m++)x=l*Math.sin(p),x=Math.pow((1-x)/(1+x),l/2),g=Math.PI/2-2*Math.atan(f*x)-p,p+=g;return new V(p*i,t.x*i/s)}},xa={__proto__:null,LonLat:An,Mercator:On,SphericalMercator:en},wa=u({},ie,{code:"EPSG:3395",projection:On,transformation:function(){var t=.5/(Math.PI*On.R);return $e(t,.5,-t,.5)}()}),Ys=u({},ie,{code:"EPSG:4326",projection:An,transformation:$e(1/180,1,-1/180,.5)}),Pa=u({},Yt,{projection:An,transformation:$e(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var s=i.lng-t.lng,o=i.lat-t.lat;return Math.sqrt(s*s+o*o)},infinite:!0});Yt.Earth=ie,Yt.EPSG3395=wa,Yt.EPSG3857=sn,Yt.EPSG900913=Io,Yt.EPSG4326=Ys,Yt.Simple=Pa;var Lt=qe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[v(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[v(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var s=this.getEvents();i.on(s,this),this.once("remove",function(){i.off(s,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});Z.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=v(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=v(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return v(t)in this._layers},eachLayer:function(t,i){for(var s in this._layers)t.call(i,this._layers[s]);return this},_addLayers:function(t){t=t?O(t)?t:[t]:[];for(var i=0,s=t.length;i<s;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[v(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=v(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,s=this._getZoomSpan();for(var o in this._zoomBoundLayers){var l=this._zoomBoundLayers[o].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),i=l.maxZoom===void 0?i:Math.max(i,l.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,s!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Te=Lt.extend({initialize:function(t,i){I(this,i),this._layers={};var s,o;if(t)for(s=0,o=t.length;s<o;s++)this.addLayer(t[s])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),s,o;for(s in this._layers)o=this._layers[s],o[t]&&o[t].apply(o,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var s in this._layers)t.call(i,this._layers[s]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return v(t)}}),Ta=function(t,i){return new Te(t,i)},jt=Te.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Te.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Te.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ft;for(var i in this._layers){var s=this._layers[i];t.extend(s.getBounds?s.getBounds():s.getLatLng())}return t}}),La=function(t,i){return new jt(t,i)},Le=$t.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){I(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var s=this._getIconUrl(t);if(!s){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(s,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(o,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(t,i){var s=this.options,o=s[i+"Size"];typeof o=="number"&&(o=[o,o]);var l=M(o),f=M(i==="shadow"&&s.shadowAnchor||s.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(s.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return E.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ba(t){return new Le(t)}var ni=Le.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ni.imagePath!="string"&&(ni.imagePath=this._detectIconPath()),(this.options.imagePath||ni.imagePath)+Le.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(s,o,l){var f=o.exec(s);return f&&f[l]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=D("div","leaflet-default-icon-path",document.body),i=Qe(t,"background-image")||Qe(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var s=document.querySelector('link[href$="leaflet.css"]');return s?s.href.substring(0,s.href.length-11-1):""}}),js=Ot.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ne(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),z(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&K(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,s=i._map,o=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=ce(i._icon),p=s.getPixelBounds(),m=s.getPixelOrigin(),g=ct(p.min._subtract(m).add(l),p.max._subtract(m).subtract(l));if(!g.contains(f)){var x=M((Math.max(g.max.x,f.x)-g.max.x)/(p.max.x-g.max.x)-(Math.min(g.min.x,f.x)-g.min.x)/(p.min.x-g.min.x),(Math.max(g.max.y,f.y)-g.max.y)/(p.max.y-g.max.y)-(Math.min(g.min.y,f.y)-g.min.y)/(p.min.y-g.min.y)).multiplyBy(o);s.panBy(x,{animate:!1}),this._draggable._newPos._add(x),this._draggable._startPos._add(x),X(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=at(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(mt(this._panRequest),this._panRequest=at(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,s=i._shadow,o=ce(i._icon),l=i._map.layerPointToLatLng(o);s&&X(s,o),i._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){mt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ci=Lt.extend({options:{icon:new ni,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){I(this,i),this._latlng=R(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=R(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),s=t.icon.createIcon(this._icon),o=!1;s!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(s.title=t.title),s.tagName==="IMG"&&(s.alt=t.alt||"")),z(s,i),t.keyboard&&(s.tabIndex="0",s.setAttribute("role","button")),this._icon=s,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&N(s,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(z(l,i),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&G(this._icon,"focus",this._panOnFocus,this),j(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&j(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&X(this._icon,t),this._shadow&&X(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(z(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),js)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new js(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&gt(this._icon,t),this._shadow&&gt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,s=i.iconSize?M(i.iconSize):M(0,0),o=i.iconAnchor?M(i.iconAnchor):M(0,0);t.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:s.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Sa(t,i){return new Ci(t,i)}var se=Lt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return I(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Mi=se.extend({options:{fill:!0,radius:10},initialize:function(t,i){I(this,i),this._latlng=R(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=R(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return se.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,s=this._clickTolerance(),o=[t+s,i+s];this._pxBounds=new Y(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ea(t,i){return new Mi(t,i)}var Cn=Mi.extend({initialize:function(t,i,s){if(typeof i=="number"&&(i=u({},s,{radius:i})),I(this,i),this._latlng=R(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:se.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,s=this._map,o=s.options.crs;if(o.distance===ie.distance){var l=Math.PI/180,f=this._mRadius/ie.R/l,p=s.project([i+f,t]),m=s.project([i-f,t]),g=p.add(m).divideBy(2),x=s.unproject(g).lat,b=Math.acos((Math.cos(f*l)-Math.sin(i*l)*Math.sin(x*l))/(Math.cos(i*l)*Math.cos(x*l)))/l;(isNaN(b)||b===0)&&(b=f/Math.cos(Math.PI/180*i)),this._point=g.subtract(s.getPixelOrigin()),this._radius=isNaN(b)?0:g.x-s.project([x,t-b]).x,this._radiusY=g.y-p.y}else{var A=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=s.latLngToLayerPoint(this._latlng),this._radius=this._point.x-s.latLngToLayerPoint(A).x}this._updateBounds()}});function Ia(t,i,s){return new Cn(t,i,s)}var Qt=se.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){I(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,s=null,o=ii,l,f,p=0,m=this._parts.length;p<m;p++)for(var g=this._parts[p],x=1,b=g.length;x<b;x++){l=g[x-1],f=g[x];var A=o(t,l,f,!0);A<i&&(i=A,s=o(t,l,f))}return s&&(s.distance=Math.sqrt(i)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $s(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=R(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ft,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return vt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],s=vt(t),o=0,l=t.length;o<l;o++)s?(i[o]=R(t[o]),this._bounds.extend(i[o])):i[o]=this._convertLatLngs(t[o]);return i},_project:function(){var t=new Y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new k(t,t);this._rawPxBounds&&(this._pxBounds=new Y([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,s){var o=t[0]instanceof V,l=t.length,f,p;if(o){for(p=[],f=0;f<l;f++)p[f]=this._map.latLngToLayerPoint(t[f]),s.extend(p[f]);i.push(p)}else for(f=0;f<l;f++)this._projectLatlngs(t[f],i,s)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,s,o,l,f,p,m,g;for(s=0,l=0,f=this._rings.length;s<f;s++)for(g=this._rings[s],o=0,p=g.length;o<p-1;o++)m=Gs(g[o],g[o+1],t,o,!0),m&&(i[l]=i[l]||[],i[l].push(m[0]),(m[1]!==g[o+1]||o===p-2)&&(i[l].push(m[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,s=0,o=t.length;s<o;s++)t[s]=Fs(t[s],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var s,o,l,f,p,m,g=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(s=0,f=this._parts.length;s<f;s++)for(m=this._parts[s],o=0,p=m.length,l=p-1;o<p;l=o++)if(!(!i&&o===0)&&Ws(t,m[l],m[o])<=g)return!0;return!1}});function Aa(t,i){return new Qt(t,i)}Qt._flat=qs;var be=Qt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=Qt.prototype._convertLatLngs.call(this,t),s=i.length;return s>=2&&i[0]instanceof V&&i[0].equals(i[s-1])&&i.pop(),i},_setLatLngs:function(t){Qt.prototype._setLatLngs.call(this,t),vt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,s=new k(i,i);if(t=new Y(t.min.subtract(s),t.max.add(s)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,l=this._rings.length,f;o<l;o++)f=Us(this._rings[o],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,s,o,l,f,p,m,g,x;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,g=this._parts.length;f<g;f++)for(s=this._parts[f],p=0,x=s.length,m=x-1;p<x;m=p++)o=s[p],l=s[m],o.y>t.y!=l.y>t.y&&t.x<(l.x-o.x)*(t.y-o.y)/(l.y-o.y)+o.x&&(i=!i);return i||Qt.prototype._containsPoint.call(this,t,!0)}});function Oa(t,i){return new be(t,i)}var Kt=jt.extend({initialize:function(t,i){I(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=O(t)?t:t.features,s,o,l;if(i){for(s=0,o=i.length;s<o;s++)l=i[s],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var p=ki(t,f);return p?(p.feature=Bi(t),p.defaultOptions=p.options,this.resetStyle(p),f.onEachFeature&&f.onEachFeature(t,p),this.addLayer(p)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function ki(t,i){var s=t.type==="Feature"?t.geometry:t,o=s?s.coordinates:null,l=[],f=i&&i.pointToLayer,p=i&&i.coordsToLatLng||Mn,m,g,x,b;if(!o&&!s)return null;switch(s.type){case"Point":return m=p(o),Qs(f,t,m,i);case"MultiPoint":for(x=0,b=o.length;x<b;x++)m=p(o[x]),l.push(Qs(f,t,m,i));return new jt(l);case"LineString":case"MultiLineString":return g=Ni(o,s.type==="LineString"?0:1,p),new Qt(g,i);case"Polygon":case"MultiPolygon":return g=Ni(o,s.type==="Polygon"?1:2,p),new be(g,i);case"GeometryCollection":for(x=0,b=s.geometries.length;x<b;x++){var A=ki({geometry:s.geometries[x],type:"Feature",properties:t.properties},i);A&&l.push(A)}return new jt(l);case"FeatureCollection":for(x=0,b=s.features.length;x<b;x++){var B=ki(s.features[x],i);B&&l.push(B)}return new jt(l);default:throw new Error("Invalid GeoJSON object.")}}function Qs(t,i,s,o){return t?t(i,s):new Ci(s,o&&o.markersInheritOptions&&o)}function Mn(t){return new V(t[1],t[0],t[2])}function Ni(t,i,s){for(var o=[],l=0,f=t.length,p;l<f;l++)p=i?Ni(t[l],i-1,s):(s||Mn)(t[l]),o.push(p);return o}function kn(t,i){return t=R(t),t.alt!==void 0?[C(t.lng,i),C(t.lat,i),C(t.alt,i)]:[C(t.lng,i),C(t.lat,i)]}function zi(t,i,s,o){for(var l=[],f=0,p=t.length;f<p;f++)l.push(i?zi(t[f],vt(t[f])?0:i-1,s,o):kn(t[f],o));return!i&&s&&l.length>0&&l.push(l[0].slice()),l}function Se(t,i){return t.feature?u({},t.feature,{geometry:i}):Bi(i)}function Bi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Nn={toGeoJSON:function(t){return Se(this,{type:"Point",coordinates:kn(this.getLatLng(),t)})}};Ci.include(Nn),Cn.include(Nn),Mi.include(Nn),Qt.include({toGeoJSON:function(t){var i=!vt(this._latlngs),s=zi(this._latlngs,i?1:0,!1,t);return Se(this,{type:(i?"Multi":"")+"LineString",coordinates:s})}}),be.include({toGeoJSON:function(t){var i=!vt(this._latlngs),s=i&&!vt(this._latlngs[0]),o=zi(this._latlngs,s?2:i?1:0,!0,t);return i||(o=[o]),Se(this,{type:(s?"Multi":"")+"Polygon",coordinates:o})}}),Te.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(s){i.push(s.toGeoJSON(t).geometry.coordinates)}),Se(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var s=i==="GeometryCollection",o=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(t);if(s)o.push(f.geometry);else{var p=Bi(f);p.type==="FeatureCollection"?o.push.apply(o,p.features):o.push(p)}}}),s?Se(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function Ks(t,i){return new Kt(t,i)}var Ca=Ks,Ri=Lt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,s){this._url=t,this._bounds=J(i),I(this,s)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(z(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){j(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&we(this._image),this},bringToBack:function(){return this._map&&Pe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=J(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:D("img");if(z(i,"leaflet-image-layer"),this._zoomAnimated&&z(i,"leaflet-zoom-animated"),this.options.className&&z(i,this.options.className),i.onselectstart=T,i.onmousemove=T,i.onload=c(this.fire,this,"load"),i.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),s=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ue(this._image,s,i)},_reset:function(){var t=this._image,i=new Y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),s=i.getSize();X(t,i.min),t.style.width=s.x+"px",t.style.height=s.y+"px"},_updateOpacity:function(){gt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ma=function(t,i,s){return new Ri(t,i,s)},Js=Ri.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:D("video");if(z(i,"leaflet-image-layer"),this._zoomAnimated&&z(i,"leaflet-zoom-animated"),this.options.className&&z(i,this.options.className),i.onselectstart=T,i.onmousemove=T,i.onloadeddata=c(this.fire,this,"load"),t){for(var s=i.getElementsByTagName("source"),o=[],l=0;l<s.length;l++)o.push(s[l].src);this._url=s.length>0?o:[i.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var p=D("source");p.src=this._url[f],i.appendChild(p)}}});function ka(t,i,s){return new Js(t,i,s)}var Xs=Ri.extend({_initImage:function(){var t=this._image=this._url;z(t,"leaflet-image-layer"),this._zoomAnimated&&z(t,"leaflet-zoom-animated"),this.options.className&&z(t,this.options.className),t.onselectstart=T,t.onmousemove=T}});function Na(t,i,s){return new Xs(t,i,s)}var Ct=Lt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof V||O(t))?(this._latlng=R(t),I(this,i)):(I(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&gt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&gt(this._container,1),this.bringToFront(),this.options.interactive&&(z(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(gt(this._container,0),this._removeTimeout=setTimeout(c(j,void 0,this._container),200)):j(this._container),this.options.interactive&&(K(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=R(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&we(this._container),this},bringToBack:function(){return this._map&&Pe(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof jt){i=null;var s=this._source._layers;for(var o in s)if(s[o]._map){i=s[o];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=M(this.options.offset),s=this._getAnchor();this._zoomAnimated?X(this._container,t.add(s)):i=i.add(t).add(s);var o=this._containerBottom=-i.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=o+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});Z.include({_initOverlay:function(t,i,s,o){var l=i;return l instanceof t||(l=new t(o).setContent(i)),s&&l.setLatLng(s),l}}),Lt.include({_initOverlay:function(t,i,s,o){var l=s;return l instanceof t?(I(l,o),l._source=this):(l=i&&!o?i:new t(o,this),l.setContent(s)),l}});var Zi=Ct.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Ct.prototype.openOn.call(this,t)},onAdd:function(t){Ct.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof se||this._source.on("preclick",fe))},onRemove:function(t){Ct.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof se||this._source.off("preclick",fe))},getEvents:function(){var t=Ct.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=D("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),s=this._wrapper=D("div",t+"-content-wrapper",i);if(this._contentNode=D("div",t+"-content",s),ti(i),Tn(this._contentNode),N(i,"contextmenu",fe),this._tipContainer=D("div",t+"-tip-container",i),this._tip=D("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=D("a",t+"-close-button",i);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',N(o,"click",function(l){nt(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var s=t.offsetWidth;s=Math.min(s,this.options.maxWidth),s=Math.max(s,this.options.minWidth),i.width=s+1+"px",i.whiteSpace="",i.height="";var o=t.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&o>l?(i.height=l+"px",z(t,f)):K(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),s=this._getAnchor();X(this._container,i.add(s))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(Qe(this._container,"marginBottom"),10)||0,s=this._container.offsetHeight+i,o=this._containerWidth,l=new k(this._containerLeft,-s-this._containerBottom);l._add(ce(this._container));var f=t.layerPointToContainerPoint(l),p=M(this.options.autoPanPadding),m=M(this.options.autoPanPaddingTopLeft||p),g=M(this.options.autoPanPaddingBottomRight||p),x=t.getSize(),b=0,A=0;f.x+o+g.x>x.x&&(b=f.x+o-x.x+g.x),f.x-b-m.x<0&&(b=f.x-m.x),f.y+s+g.y>x.y&&(A=f.y+s-x.y+g.y),f.y-A-m.y<0&&(A=f.y-m.y),(b||A)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([b,A]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),za=function(t,i){return new Zi(t,i)};Z.mergeOptions({closePopupOnClick:!0}),Z.include({openPopup:function(t,i,s){return this._initOverlay(Zi,t,i,s).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Lt.include({bindPopup:function(t,i){return this._popup=this._initOverlay(Zi,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof jt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){de(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof se)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Di=Ct.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Ct.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Ct.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Ct.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=D("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,s,o=this._map,l=this._container,f=o.latLngToContainerPoint(o.getCenter()),p=o.layerPointToContainerPoint(t),m=this.options.direction,g=l.offsetWidth,x=l.offsetHeight,b=M(this.options.offset),A=this._getAnchor();m==="top"?(i=g/2,s=x):m==="bottom"?(i=g/2,s=0):m==="center"?(i=g/2,s=x/2):m==="right"?(i=0,s=x/2):m==="left"?(i=g,s=x/2):p.x<f.x?(m="right",i=0,s=x/2):(m="left",i=g+(b.x+A.x)*2,s=x/2),t=t.subtract(M(i,s,!0)).add(b).add(A),K(l,"leaflet-tooltip-right"),K(l,"leaflet-tooltip-left"),K(l,"leaflet-tooltip-top"),K(l,"leaflet-tooltip-bottom"),z(l,"leaflet-tooltip-"+m),X(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&gt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ba=function(t,i){return new Di(t,i)};Z.include({openTooltip:function(t,i,s){return this._initOverlay(Di,t,i,s).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Lt.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Di,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",s={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?s.add=this._openTooltip:(s.mouseover=this._openTooltip,s.mouseout=this.closeTooltip,s.click=this._openTooltip,this._map?this._addFocusListeners():s.add=this._addFocusListeners),this._tooltip.options.sticky&&(s.mousemove=this._moveTooltip),this[i](s),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof jt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(N(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),N(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,s,o;this._tooltip.options.sticky&&t.originalEvent&&(s=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(s),i=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(i)}});var tr=Le.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),s=this.options;if(s.html instanceof Element?(bi(i),i.appendChild(s.html)):i.innerHTML=s.html!==!1?s.html:"",s.bgPos){var o=M(s.bgPos);i.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Ra(t){return new tr(t)}Le.Default=ni;var si=Lt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:E.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){I(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),j(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(we(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof k?t:new k(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,s=-t(-1/0,1/0),o=0,l=i.length,f;o<l;o++)f=i[o].style.zIndex,i[o]!==this._container&&f&&(s=t(s,+f));isFinite(s)&&(this.options.zIndex=s+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!E.ielt9){gt(this._container,this.options.opacity);var t=+new Date,i=!1,s=!1;for(var o in this._tiles){var l=this._tiles[o];if(!(!l.current||!l.loaded)){var f=Math.min(1,(t-l.loaded)/200);gt(l.el,f),f<1?i=!0:(l.active?s=!0:this._onOpaqueTile(l),l.active=!0)}}s&&!this._noPrune&&this._pruneTiles(),i&&(mt(this._fadeFrame),this._fadeFrame=at(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=D("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var s in this._levels)s=Number(s),this._levels[s].el.children.length||s===t?(this._levels[s].el.style.zIndex=i-Math.abs(t-s),this._onUpdateLevel(s)):(j(this._levels[s].el),this._removeTilesAtZoom(s),this._onRemoveLevel(s),delete this._levels[s]);var o=this._levels[t],l=this._map;return o||(o=this._levels[t]={},o.el=D("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=i,o.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,l.getCenter(),l.getZoom()),T(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var t,i,s=this._map.getZoom();if(s>this.options.maxZoom||s<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var o=i.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)j(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,s,o){var l=Math.floor(t/2),f=Math.floor(i/2),p=s-1,m=new k(+l,+f);m.z=+p;var g=this._tileCoordsToKey(m),x=this._tiles[g];return x&&x.active?(x.retain=!0,!0):(x&&x.loaded&&(x.retain=!0),p>o?this._retainParent(l,f,p,o):!1)},_retainChildren:function(t,i,s,o){for(var l=2*t;l<2*t+2;l++)for(var f=2*i;f<2*i+2;f++){var p=new k(l,f);p.z=s+1;var m=this._tileCoordsToKey(p),g=this._tiles[m];if(g&&g.active){g.retain=!0;continue}else g&&g.loaded&&(g.retain=!0);s+1<o&&this._retainChildren(l,f,s+1,o)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,s,o){var l=Math.round(i);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!o||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),s||this._pruneTiles(),this._noPrune=!!s),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var s in this._levels)this._setZoomTransform(this._levels[s],t,i)},_setZoomTransform:function(t,i,s){var o=this._map.getZoomScale(s,t.zoom),l=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(i,s)).round();E.any3d?ue(t.el,l,o):X(t.el,l)},_resetGrid:function(){var t=this._map,i=t.options.crs,s=this._tileSize=this.getTileSize(),o=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],o).x/s.x),Math.ceil(t.project([0,i.wrapLng[1]],o).x/s.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],o).y/s.x),Math.ceil(t.project([i.wrapLat[1],0],o).y/s.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,s=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),o=i.getZoomScale(s,this._tileZoom),l=i.project(t,this._tileZoom).floor(),f=i.getSize().divideBy(o*2);return new Y(l.subtract(f),l.add(f))},_update:function(t){var i=this._map;if(i){var s=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(o),f=l.getCenter(),p=[],m=this.options.keepBuffer,g=new Y(l.getBottomLeft().subtract([m,-m]),l.getTopRight().add([m,-m]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var x in this._tiles){var b=this._tiles[x].coords;(b.z!==this._tileZoom||!g.contains(new k(b.x,b.y)))&&(this._tiles[x].current=!1)}if(Math.abs(s-this._tileZoom)>1){this._setView(t,s);return}for(var A=l.min.y;A<=l.max.y;A++)for(var B=l.min.x;B<=l.max.x;B++){var ht=new k(B,A);if(ht.z=this._tileZoom,!!this._isValidTile(ht)){var et=this._tiles[this._tileCoordsToKey(ht)];et?et.current=!0:p.push(ht)}}if(p.sort(function(dt,Ie){return dt.distanceTo(f)-Ie.distanceTo(f)}),p.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yt=document.createDocumentFragment();for(B=0;B<p.length;B++)this._addTile(p[B],yt);this._level.el.appendChild(yt)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var s=this._globalTileRange;if(!i.wrapLng&&(t.x<s.min.x||t.x>s.max.x)||!i.wrapLat&&(t.y<s.min.y||t.y>s.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return J(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,s=this.getTileSize(),o=t.scaleBy(s),l=o.add(s),f=i.unproject(o,t.z),p=i.unproject(l,t.z);return[f,p]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),s=new ft(i[0],i[1]);return this.options.noWrap||(s=this._map.wrapLatLngBounds(s)),s},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),s=new k(+i[0],+i[1]);return s.z=+i[2],s},_removeTile:function(t){var i=this._tiles[t];i&&(j(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){z(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=T,t.onmousemove=T,E.ielt9&&this.options.opacity<1&&gt(t,this.options.opacity)},_addTile:function(t,i){var s=this._getTilePos(t),o=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&at(c(this._tileReady,this,t,null,l)),X(l,s),this._tiles[o]={el:l,coords:t,current:!0},i.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,i,s){i&&this.fire("tileerror",{error:i,tile:s,coords:t});var o=this._tileCoordsToKey(t);s=this._tiles[o],s&&(s.loaded=+new Date,this._map._fadeAnimated?(gt(s.el,0),mt(this._fadeFrame),this._fadeFrame=at(this._updateOpacity,this)):(s.active=!0,this._pruneTiles()),i||(z(s.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:s.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),E.ielt9||!this._map._fadeAnimated?at(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new k(this._wrapX?y(t.x,this._wrapX):t.x,this._wrapY?y(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new Y(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Za(t){return new si(t)}var Ee=si.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=I(this,i),i.detectRetina&&E.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var s=document.createElement("img");return N(s,"load",c(this._tileOnLoad,this,i,s)),N(s,"error",c(this._tileOnError,this,i,s)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(s.referrerPolicy=this.options.referrerPolicy),s.alt="",s.src=this.getTileUrl(t),s},getTileUrl:function(t){var i={r:E.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var s=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=s),i["-y"]=s}return U(this._url,u(i,this.options))},_tileOnLoad:function(t,i){E.ielt9?setTimeout(c(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,s){var o=this.options.errorTileUrl;o&&i.getAttribute("src")!==o&&(i.src=o),t(s,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,s=this.options.zoomReverse,o=this.options.zoomOffset;return s&&(t=i-t),t+o},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=T,i.onerror=T,!i.complete)){i.src=ee;var s=this._tiles[t].coords;j(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:s})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",ee),si.prototype._removeTile.call(this,t)},_tileReady:function(t,i,s){if(!(!this._map||s&&s.getAttribute("src")===ee))return si.prototype._tileReady.call(this,t,i,s)}});function er(t,i){return new Ee(t,i)}var ir=Ee.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var s=u({},this.defaultWmsParams);for(var o in i)o in this.options||(s[o]=i[o]);i=I(this,i);var l=i.detectRetina&&E.retina?2:1,f=this.getTileSize();s.width=f.x*l,s.height=f.y*l,this.wmsParams=s},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Ee.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),s=this._crs,o=ct(s.project(i[0]),s.project(i[1])),l=o.min,f=o.max,p=(this._wmsVersion>=1.3&&this._crs===Ys?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),m=Ee.prototype.getTileUrl.call(this,t);return m+Q(this.wmsParams,m,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(t,i){return u(this.wmsParams,t),i||this.redraw(),this}});function Da(t,i){return new ir(t,i)}Ee.WMS=ir,er.wms=Da;var Jt=Lt.extend({options:{padding:.1},initialize:function(t){I(this,t),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),z(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var s=this._map.getZoomScale(i,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,i),f=o.multiplyBy(-s).add(l).subtract(this._map._getNewPixelOrigin(t,i));E.any3d?ue(this._container,f,s):X(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),s=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new Y(s,s.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),nr=Jt.extend({options:{tolerance:0},getEvents:function(){var t=Jt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Jt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");N(t,"mousemove",this._onMouseMove,this),N(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),N(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){mt(this._redrawRequest),delete this._ctx,j(this._container),G(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jt.prototype._update.call(this);var t=this._bounds,i=this._container,s=t.getSize(),o=E.retina?2:1;X(i,t.min),i.width=o*s.x,i.height=o*s.y,i.style.width=s.x+"px",i.style.height=s.y+"px",E.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Jt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[v(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,s=i.next,o=i.prev;s?s.prev=o:this._drawLast=o,o?o.next=s:this._drawFirst=s,delete t._order,delete this._layers[v(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),s=[],o,l;for(l=0;l<i.length;l++){if(o=Number(i[l]),isNaN(o))return;s.push(o)}t.options._dashArray=s}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||at(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Y,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var s=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,s.x,s.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var s,o,l,f,p=t._parts,m=p.length,g=this._ctx;if(m){for(g.beginPath(),s=0;s<m;s++){for(o=0,l=p[s].length;o<l;o++)f=p[s][o],g[o?"lineTo":"moveTo"](f.x,f.y);i&&g.closePath()}this._fillStroke(g,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,s=this._ctx,o=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||o)/o;l!==1&&(s.save(),s.scale(1,l)),s.beginPath(),s.arc(i.x,i.y/l,o,0,Math.PI*2,!1),l!==1&&s.restore(),this._fillStroke(s,t)}},_fillStroke:function(t,i){var s=i.options;s.fill&&(t.globalAlpha=s.fillOpacity,t.fillStyle=s.fillColor||s.color,t.fill(s.fillRule||"evenodd")),s.stroke&&s.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=s.opacity,t.lineWidth=s.weight,t.strokeStyle=s.color,t.lineCap=s.lineCap,t.lineJoin=s.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),s,o,l=this._drawFirst;l;l=l.next)s=l.layer,s.options.interactive&&s._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(s))&&(o=s);this._fireEvent(o?[o]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(K(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var s,o,l=this._drawFirst;l;l=l.next)s=l.layer,s.options.interactive&&s._containsPoint(i)&&(o=s);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(z(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,s){this._map._fireDOMEvent(i,s||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var s=i.next,o=i.prev;if(s)s.prev=o;else return;o?o.next=s:s&&(this._drawFirst=s),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var s=i.next,o=i.prev;if(o)o.next=s;else return;s?s.prev=o:o&&(this._drawLast=o),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function sr(t){return E.canvas?new nr(t):null}var ri=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ua={_initContainer:function(){this._container=D("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Jt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=ri("shape");z(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=ri("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;j(i),t.removeInteractiveTarget(i),delete this._layers[v(t)]},_updateStyle:function(t){var i=t._stroke,s=t._fill,o=t.options,l=t._container;l.stroked=!!o.stroke,l.filled=!!o.fill,o.stroke?(i||(i=t._stroke=ri("stroke")),l.appendChild(i),i.weight=o.weight+"px",i.color=o.color,i.opacity=o.opacity,o.dashArray?i.dashStyle=O(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=o.lineCap.replace("butt","flat"),i.joinstyle=o.lineJoin):i&&(l.removeChild(i),t._stroke=null),o.fill?(s||(s=t._fill=ri("fill")),l.appendChild(s),s.color=o.fillColor||o.color,s.opacity=o.fillOpacity):s&&(l.removeChild(s),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),s=Math.round(t._radius),o=Math.round(t._radiusY||s);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+s+","+o+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){we(t._container)},_bringToBack:function(t){Pe(t._container)}},Ui=E.vml?ri:hs,oi=Jt.extend({_initContainer:function(){this._container=Ui("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ui("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){j(this._container),G(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jt.prototype._update.call(this);var t=this._bounds,i=t.getSize(),s=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,s.setAttribute("width",i.x),s.setAttribute("height",i.y)),X(s,t.min),s.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Ui("path");t.options.className&&z(i,t.options.className),t.options.interactive&&z(i,"leaflet-interactive"),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){j(t._path),t.removeInteractiveTarget(t._path),delete this._layers[v(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,s=t.options;i&&(s.stroke?(i.setAttribute("stroke",s.color),i.setAttribute("stroke-opacity",s.opacity),i.setAttribute("stroke-width",s.weight),i.setAttribute("stroke-linecap",s.lineCap),i.setAttribute("stroke-linejoin",s.lineJoin),s.dashArray?i.setAttribute("stroke-dasharray",s.dashArray):i.removeAttribute("stroke-dasharray"),s.dashOffset?i.setAttribute("stroke-dashoffset",s.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),s.fill?(i.setAttribute("fill",s.fillColor||s.color),i.setAttribute("fill-opacity",s.fillOpacity),i.setAttribute("fill-rule",s.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,ls(t._parts,i))},_updateCircle:function(t){var i=t._point,s=Math.max(Math.round(t._radius),1),o=Math.max(Math.round(t._radiusY),1)||s,l="a"+s+","+o+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(i.x-s)+","+i.y+l+s*2+",0 "+l+-s*2+",0 ";this._setPath(t,f)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){we(t._path)},_bringToBack:function(t){Pe(t._path)}});E.vml&&oi.include(Ua);function rr(t){return E.svg||E.vml?new oi(t):null}Z.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&sr(t)||rr(t)}});var or=be.extend({initialize:function(t,i){be.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=J(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ha(t,i){return new or(t,i)}oi.create=Ui,oi.pointsToPath=ls,Kt.geometryToLayer=ki,Kt.coordsToLatLng=Mn,Kt.coordsToLatLngs=Ni,Kt.latLngToCoords=kn,Kt.latLngsToCoords=zi,Kt.getFeature=Se,Kt.asFeature=Bi,Z.mergeOptions({boxZoom:!0});var ar=Ot.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){N(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){G(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){j(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ke(),_n(),this._startPoint=this._map.mouseEventToContainerPoint(t),N(document,{contextmenu:de,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=D("div","leaflet-zoom-box",this._container),z(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new Y(this._point,this._startPoint),s=i.getSize();X(this._box,i.min),this._box.style.width=s.x+"px",this._box.style.height=s.y+"px"},_finish:function(){this._moved&&(j(this._box),K(this._container,"leaflet-crosshair")),Je(),mn(),G(document,{contextmenu:de,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var i=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Z.addInitHook("addHandler","boxZoom",ar),Z.mergeOptions({doubleClickZoom:!0});var hr=Ot.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,s=i.getZoom(),o=i.options.zoomDelta,l=t.originalEvent.shiftKey?s-o:s+o;i.options.doubleClickZoom==="center"?i.setZoom(l):i.setZoomAround(t.containerPoint,l)}});Z.addInitHook("addHandler","doubleClickZoom",hr),Z.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var lr=Ot.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ne(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}z(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){K(this._map._container,"leaflet-grab"),K(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=J(this._map.options.maxBounds);this._offsetLimit=ct(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,s=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(s),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),s=this._initialWorldOffset,o=this._draggable._newPos.x,l=(o-i+s)%t+i-s,f=(o+i+s)%t-i-s,p=Math.abs(l+s)<Math.abs(f+s)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(t){var i=this._map,s=i.options,o=!s.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),o)i.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,p=s.easeLinearity,m=l.multiplyBy(p/f),g=m.distanceTo([0,0]),x=Math.min(s.inertiaMaxSpeed,g),b=m.multiplyBy(x/g),A=x/(s.inertiaDeceleration*p),B=b.multiplyBy(-A/2).round();!B.x&&!B.y?i.fire("moveend"):(B=i._limitOffset(B,i.options.maxBounds),at(function(){i.panBy(B,{duration:A,easeLinearity:p,noMoveStart:!0,animate:!0})}))}}});Z.addInitHook("addHandler","dragging",lr),Z.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ur=Ot.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),N(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),G(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,s=t.scrollTop||i.scrollTop,o=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(o,s)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},s=this.keyCodes,o,l;for(o=0,l=s.left.length;o<l;o++)i[s.left[o]]=[-1*t,0];for(o=0,l=s.right.length;o<l;o++)i[s.right[o]]=[t,0];for(o=0,l=s.down.length;o<l;o++)i[s.down[o]]=[0,t];for(o=0,l=s.up.length;o<l;o++)i[s.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},s=this.keyCodes,o,l;for(o=0,l=s.zoomIn.length;o<l;o++)i[s.zoomIn[o]]=t;for(o=0,l=s.zoomOut.length;o<l;o++)i[s.zoomOut[o]]=-t},_addHooks:function(){N(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){G(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,s=this._map,o;if(i in this._panKeys){if(!s._panAnim||!s._panAnim._inProgress)if(o=this._panKeys[i],t.shiftKey&&(o=M(o).multiplyBy(3)),s.options.maxBounds&&(o=s._limitOffset(M(o),s.options.maxBounds)),s.options.worldCopyJump){var l=s.wrapLatLng(s.unproject(s.project(s.getCenter()).add(o)));s.panTo(l)}else s.panBy(o)}else if(i in this._zoomKeys)s.setZoom(s.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&s._popup&&s._popup.options.closeOnEscapeKey)s.closePopup();else return;de(t)}}});Z.addInitHook("addHandler","keyboard",ur),Z.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cr=Ot.extend({addHooks:function(){N(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){G(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=zs(t),s=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(s-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),o),de(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),s=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,f=s?Math.ceil(l/s)*s:l,p=t._limitZoom(i+(this._delta>0?f:-f))-i;this._delta=0,this._startTime=null,p&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+p):t.setZoomAround(this._lastMousePos,i+p))}});Z.addInitHook("addHandler","scrollWheelZoom",cr);var Fa=600;Z.mergeOptions({tapHold:E.touchNative&&E.safari&&E.mobile,tapTolerance:15});var fr=Ot.extend({addHooks:function(){N(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){G(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new k(i.clientX,i.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(N(document,"touchend",nt),N(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Fa),N(document,"touchend touchcancel contextmenu",this._cancel,this),N(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){G(document,"touchend",nt),G(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),G(document,"touchend touchcancel contextmenu",this._cancel,this),G(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new k(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var s=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});s._simulated=!0,i.target.dispatchEvent(s)}});Z.addInitHook("addHandler","tapHold",fr),Z.mergeOptions({touchZoom:E.touch,bounceAtZoomLimits:!0});var dr=Ot.extend({addHooks:function(){z(this._map._container,"leaflet-touch-zoom"),N(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){K(this._map._container,"leaflet-touch-zoom"),G(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var s=i.mouseEventToContainerPoint(t.touches[0]),o=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(s.add(o)._divideBy(2))),this._startDist=s.distanceTo(o),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),N(document,"touchmove",this._onTouchMove,this),N(document,"touchend touchcancel",this._onTouchEnd,this),nt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,s=i.mouseEventToContainerPoint(t.touches[0]),o=i.mouseEventToContainerPoint(t.touches[1]),l=s.distanceTo(o)/this._startDist;if(this._zoom=i.getScaleZoom(l,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&l<1||this._zoom>i.getMaxZoom()&&l>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=s._add(o)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),mt(this._animRequest);var p=c(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=at(p,this,!0),nt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,mt(this._animRequest),G(document,"touchmove",this._onTouchMove,this),G(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Z.addInitHook("addHandler","touchZoom",dr),Z.BoxZoom=ar,Z.DoubleClickZoom=hr,Z.Drag=lr,Z.Keyboard=ur,Z.ScrollWheelZoom=cr,Z.TapHold=fr,Z.TouchZoom=dr,n.Bounds=Y,n.Browser=E,n.CRS=Yt,n.Canvas=nr,n.Circle=Cn,n.CircleMarker=Mi,n.Class=$t,n.Control=Tt,n.DivIcon=tr,n.DivOverlay=Ct,n.DomEvent=oa,n.DomUtil=sa,n.Draggable=ne,n.Evented=qe,n.FeatureGroup=jt,n.GeoJSON=Kt,n.GridLayer=si,n.Handler=Ot,n.Icon=Le,n.ImageOverlay=Ri,n.LatLng=V,n.LatLngBounds=ft,n.Layer=Lt,n.LayerGroup=Te,n.LineUtil=ya,n.Map=Z,n.Marker=Ci,n.Mixin=da,n.Path=se,n.Point=k,n.PolyUtil=pa,n.Polygon=be,n.Polyline=Qt,n.Popup=Zi,n.PosAnimation=Bs,n.Projection=xa,n.Rectangle=or,n.Renderer=Jt,n.SVG=oi,n.SVGOverlay=Xs,n.TileLayer=Ee,n.Tooltip=Di,n.Transformation=nn,n.Util=So,n.VideoOverlay=Js,n.bind=c,n.bounds=ct,n.canvas=sr,n.circle=Ia,n.circleMarker=Ea,n.control=ei,n.divIcon=Ra,n.extend=u,n.featureGroup=La,n.geoJSON=Ks,n.geoJson=Ca,n.gridLayer=Za,n.icon=ba,n.imageOverlay=Ma,n.latLng=R,n.latLngBounds=J,n.layerGroup=Ta,n.map=aa,n.marker=Sa,n.point=M,n.polygon=Oa,n.polyline=Aa,n.popup=za,n.rectangle=Ha,n.setOptions=I,n.stamp=v,n.svg=rr,n.svgOverlay=Na,n.tileLayer=er,n.tooltip=Ba,n.transformation=$e,n.version=r,n.videoOverlay=ka;var Wa=window.L;n.noConflict=function(){return window.L=Wa,this},window.L=n})}(hi,hi.exports)),hi.exports}var wt=th();const Re=Ja(wt),Nr=!0,eh=!1,Gi={CCW:-1,CW:1,NOT_ORIENTABLE:0},ih=2*Math.PI,$i=1,zr=0,Ft=2,nh=3,sh=4,rh=1,oh=2,jn=0,ui=1,Be=2;var Yi=Object.freeze({__proto__:null,BOUNDARY:Ft,CCW:Nr,CONTAINS:nh,CW:eh,END_VERTEX:Be,INSIDE:$i,INTERLACE:sh,NOT_VERTEX:jn,ORIENTATION:Gi,OUTSIDE:zr,OVERLAP_OPPOSITE:oh,OVERLAP_SAME:rh,PIx2:ih,START_VERTEX:ui});let Gt=1e-6;function Br(a){Gt=a}function Rr(){return Gt}const ah=3;function Dn(a){return a<Gt&&a>-Gt}function _e(a,e){return a-e<Gt&&a-e>-Gt}function Zr(a,e){return a-e>Gt}function hh(a,e){return a-e>-Gt}function Dr(a,e){return a-e<-Gt}function lh(a,e){return a-e<Gt}var uh=Object.freeze({__proto__:null,DECIMALS:ah,EQ:_e,EQ_0:Dn,GE:hh,GT:Zr,LE:lh,LT:Dr,getTolerance:Rr,setTolerance:Br});let h={Utils:uh,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let a in Yi)h[a]=Yi[a];Object.defineProperty(h,"DP_TOL",{get:function(){return Rr()},set:function(a){Br(a)}});class ${static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}h.Errors=$;class Qn{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],u=e||this.first,d=n||this.last,c=u;if(c===void 0)return r;do r.push(c),c=c.next;while(c!==d.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw $.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const vr={stroke:"black"};class ch{constructor(e=vr){for(const n in e)this[n]=e[n];this.stroke=e.stroke??vr.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function ge(a){return new ch(a).toAttributesString()}function Fe(a,e){let n=[],[r,u,d]=a.standard,[c,_,v]=e.standard,w=r*_-u*c,y=d*_-u*v,T=r*v-d*c;if(!h.Utils.EQ_0(w)){let C,q;u===0?(C=d/r,q=T/w):_===0?(C=v/c,q=T/w):r===0?(C=y/w,q=d/u):c===0?(C=y/w,q=v/_):(C=y/w,q=T/w),n.push(new h.Point(C,q))}return n}function ve(a,e){let n=[],r=e.pc.projectionOn(a),u=e.pc.distanceTo(r)[0];if(h.Utils.EQ(u,e.r))n.push(r);else if(h.Utils.LT(u,e.r)){let d=Math.sqrt(e.r*e.r-u*u),c,_;c=a.norm.rotate90CCW().multiply(d),_=r.translate(c),n.push(_),c=a.norm.rotate90CW().multiply(d),_=r.translate(c),n.push(_)}return n}function Ze(a,e){let n=[];for(let r of e.toSegments()){let u=gi(r,a);for(let d of u)Yr(d,n)||n.push(d)}return n}function Qi(a,e){let n=[];if(Ze(a,e.box).length===0)return n;let r=new h.Circle(e.pc,e.r),u=ve(a,r);for(let d of u)d.on(e)&&n.push(d);return n}function gi(a,e){let n=[];if(a.ps.on(e)&&n.push(a.ps),a.pe.on(e)&&!a.isZeroLength()&&n.push(a.pe),n.length>0||a.isZeroLength()||a.ps.leftTo(e)&&a.pe.leftTo(e)||!a.ps.leftTo(e)&&!a.pe.leftTo(e))return n;let r=new h.Line(a.ps,a.pe);return Fe(r,e)}function Ki(a,e){let n=[];if(a.box.not_intersect(e.box))return n;if(a.isZeroLength())return a.ps.on(e)&&n.push(a.ps),n;if(e.isZeroLength())return e.ps.on(a)&&n.push(e.ps),n;let r=new h.Line(a.ps,a.pe),u=new h.Line(e.ps,e.pe);if(r.incidentTo(u))a.ps.on(e)&&n.push(a.ps),a.pe.on(e)&&n.push(a.pe),e.ps.on(a)&&!e.ps.equalTo(a.ps)&&!e.ps.equalTo(a.pe)&&n.push(e.ps),e.pe.on(a)&&!e.pe.equalTo(a.ps)&&!e.pe.equalTo(a.pe)&&n.push(e.pe);else{let d=Fe(r,u);d.length>0&&yr(d[0],a)&&yr(d[0],e)&&n.push(d[0])}return n}function yr(a,e){const n=e.box;return h.Utils.LE(a.x,n.xmax)&&h.Utils.GE(a.x,n.xmin)&&h.Utils.LE(a.y,n.ymax)&&h.Utils.GE(a.y,n.ymin)}function Ji(a,e){let n=[];if(a.box.not_intersect(e.box))return n;if(a.isZeroLength()){let[d,c]=a.ps.distanceTo(e.pc);return h.Utils.EQ(d,e.r)&&n.push(a.ps),n}let r=new h.Line(a.ps,a.pe),u=ve(r,e);for(let d of u)d.on(a)&&n.push(d);return n}function We(a,e){let n=[];if(a.box.not_intersect(e.box))return n;if(a.isZeroLength())return a.ps.on(e)&&n.push(a.ps),n;let r=new h.Line(a.ps,a.pe),u=new h.Circle(e.pc,e.r),d=ve(r,u);for(let c of d)c.on(a)&&c.on(e)&&n.push(c);return n}function fh(a,e){let n=[];for(let r of e.toSegments()){let u=Ki(r,a);for(let d of u)n.push(d)}return n}function Ur(a,e){let n=[];if(a.box.not_intersect(e.box))return n;let r=new h.Vector(a.pc,e.pc),u=a.r,d=e.r;if(h.Utils.EQ_0(u)||h.Utils.EQ_0(d))return n;if(h.Utils.EQ_0(r.x)&&h.Utils.EQ_0(r.y)&&h.Utils.EQ(u,d))return n.push(a.pc.translate(-u,0)),n;let c=a.pc.distanceTo(e.pc)[0];if(h.Utils.GT(c,u+d)||h.Utils.LT(c,Math.abs(u-d)))return n;r.x/=c,r.y/=c;let _;if(h.Utils.EQ(c,u+d)||h.Utils.EQ(c,Math.abs(u-d)))return _=a.pc.translate(u*r.x,u*r.y),n.push(_),n;let v=u*u/(2*c)-d*d/(2*c)+c/2,w=a.pc.translate(v*r.x,v*r.y),y=Math.sqrt(u*u-v*v);return _=w.translate(r.rotate90CCW().multiply(y)),n.push(_),_=w.translate(r.rotate90CW().multiply(y)),n.push(_),n}function dh(a,e){let n=[];for(let r of e.toSegments()){let u=Ji(r,a);for(let d of u)n.push(d)}return n}function Hr(a,e){let n=[];if(a.box.not_intersect(e.box))return n;if(a.pc.equalTo(e.pc)&&h.Utils.EQ(a.r,e.r)){let c;return c=a.start,c.on(e)&&n.push(c),c=a.end,c.on(e)&&n.push(c),c=e.start,c.on(a)&&n.push(c),c=e.end,c.on(a)&&n.push(c),n}let r=new h.Circle(a.pc,a.r),u=new h.Circle(e.pc,e.r),d=r.intersect(u);for(let c of d)c.on(a)&&c.on(e)&&n.push(c);return n}function Kn(a,e){let n=[];if(a.box.not_intersect(e.box))return n;if(e.pc.equalTo(a.pc)&&h.Utils.EQ(e.r,a.r))return n.push(a.start),n.push(a.end),n;let r=e,u=new h.Circle(a.pc,a.r),d=Ur(r,u);for(let c of d)c.on(a)&&n.push(c);return n}function ph(a,e){let n=[];for(let r of e.toSegments()){let u=We(r,a);for(let d of u)n.push(d)}return n}function Fr(a,e){return a.isSegment?Ki(a.shape,e):We(e,a.shape)}function Wr(a,e){return a.isSegment?We(a.shape,e):Hr(a.shape,e)}function Vr(a,e){return a.isSegment?gi(a.shape,e):Qi(e,a.shape)}function _h(a,e){return a.isSegment?ts(e,a.shape):es(e,a.shape)}function mh(a,e){return a.isSegment?Ji(a.shape,e):Kn(a.shape,e)}function Jn(a,e){let n=[];for(let r of e.edges)for(let u of Fr(r,a))n.push(u);return n}function Xn(a,e){let n=[];for(let r of e.edges)for(let u of Wr(r,a))n.push(u);return n}function vi(a,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let u of Vr(r,a))Yr(u,n)||n.push(u);return a.sortPoints(n)}function Gr(a,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let u of mh(r,a))n.push(u);return n}function qr(a,e){return a.isSegment?Fr(e,a.shape):a.isArc?Wr(e,a.shape):a.isLine?Vr(e,a.shape):a.isRay?_h(e,a.shape):[]}function $r(a,e){let n=[];if(e.isEmpty()||a.shape.box.not_intersect(e.box))return n;let r=e.edges.search(a.shape.box);for(let u of r)n=[...n,...qr(a,u)];return n}function gh(a,e){let n=[];if(e.isEmpty()||a.size===0)return n;for(let r of a)n=[...n,...$r(r,e)];return n}function vh(a,e){let n=[];if(a.isEmpty()||e.isEmpty()||a.box.not_intersect(e.box))return n;for(let r of a.edges)n=[...n,...$r(r,e)];return n}function yh(a,e){return a instanceof h.Line?vi(a,e):a instanceof h.Segment?Jn(a,e):a instanceof h.Arc?Xn(a,e):[]}function Yr(a,e){return e.some(n=>n.equalTo(a))}function he(a){return new h.Line(a.start,a.norm)}function ts(a,e){return gi(e,he(a)).filter(n=>a.contains(n))}function es(a,e){return Qi(he(a),e).filter(n=>a.contains(n))}function jr(a,e){return ve(he(a),e).filter(n=>a.contains(n))}function xh(a,e){return Ze(he(a),e).filter(n=>a.contains(n))}function Qr(a,e){return Fe(he(a),e).filter(n=>a.contains(n))}function wh(a,e){return Fe(he(a),he(e)).filter(n=>a.contains(n)).filter(n=>e.contains(n))}function Kr(a,e){return vi(he(a),e).filter(n=>a.contains(n))}function Jr(a,e){if(a.intersect&&a.intersect instanceof Function)return a.intersect(e);throw $.UNSUPPORTED_SHAPE_TYPE}function yi(a,e){let n=[];for(let r of e)n=[...n,...Jr(a,r.shape)];return n}function Ph(a,e){let n=[];for(let r of a)for(let u of e)n=[...n,...Jr(r,u)];return n}let ye=class li extends Qn{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],u=r.length,d=v=>v instanceof h.Segment||v instanceof h.Arc||v instanceof h.Ray||v instanceof h.Line,c=v=>v instanceof h.Segment||v instanceof h.Arc||v instanceof h.Ray,_=v=>v instanceof h.Segment||v instanceof h.Arc;if(n=u===1&&d(r[0])||u>1&&c(r[0])&&c(r[u-1])&&r.slice(1,u-1).every(_),n){this.isInfinite=r.some(v=>v instanceof h.Ray||v instanceof h.Line);for(let v of r){let w=new h.Edge(v);this.append(w)}this.setArcLength()}else throw h.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new h.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new li(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let u=new h.Edge(r[0]),d=n.prev;return this.insert(u,d),n.shape=r[1],u}getChain(e,n){let r=[];for(let u=e;u!==n.next;u=u.next)r.push(u);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=h.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof h.Line){const[n,r]=h.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof h.Circle){const[n,r]=h.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof h.Segment){const[n,r]=h.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof h.Arc){const[n,r]=h.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof h.Multiline)return h.Distance.multiline2multiline(this,e);throw h.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof h.Multiline?Ph(this,e):yi(e,this)}contains(e){if(e instanceof h.Point)return this.edges.some(n=>n.shape.contains(e));throw h.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new li(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new h.Point){return new li(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new h.Matrix){return new li(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${ge({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};h.Multiline=ye;const Th=(...a)=>new h.Multiline(...a);h.multiline=Th;function De(a,e,n){let r=n.length,u=a.shape.split(e);if(u.length===0)return;let d=0;u[0]===null?d=0:u[1]===null?d=a.shape.length:d=u[0].length;let c=jn;_e(d,0)&&(c|=ui),_e(d,a.shape.length)&&(c|=Be);let _;d===1/0?_=u[0].coord(e):_=c&Be&&a.next&&a.next.arc_length===0?0:a.arc_length+d,n.push({id:r,pt:e,arc_length:_,edge_before:a,edge_after:void 0,face:a.face,is_vertex:c})}function _i(a){a.int_points1_sorted=ae(a.int_points1),a.int_points2_sorted=ae(a.int_points2)}function ae(a){let e=new Map,n=0;for(let r of a)e.has(r.face)||(e.set(r.face,n),n++);for(let r of a)r.faceId=e.get(r.face);return a.slice().sort(Lh)}function Lh(a,e){return a.faceId<e.faceId?-1:a.faceId>e.faceId?1:a.arc_length<e.arc_length?-1:a.arc_length>e.arc_length?1:0}function is(a){if(a.int_points1.length<2)return;let e=!1,n,r,u,d;for(let c=0;c<a.int_points1_sorted.length;c++)if(a.int_points1_sorted[c].id!==-1){n=a.int_points1_sorted[c],r=a.int_points2[n.id];for(let _=c+1;_<a.int_points1_sorted.length&&(u=a.int_points1_sorted[_],!!_e(u.arc_length,n.arc_length));_++)u.id!==-1&&(d=a.int_points2[u.id],d.id!==-1&&u.edge_before===n.edge_before&&u.edge_after===n.edge_after&&d.edge_before===r.edge_before&&d.edge_after===r.edge_after&&(u.id=-1,d.id=-1,e=!0))}r=a.int_points2_sorted[0],n=a.int_points1[r.id];for(let c=1;c<a.int_points2_sorted.length;c++){let _=a.int_points2_sorted[c];if(_.id===-1)continue;if(r.id===-1||!_e(_.arc_length,r.arc_length)){r=_,n=a.int_points1[r.id];continue}let v=a.int_points1[_.id];v.edge_before===n.edge_before&&v.edge_after===n.edge_after&&_.edge_before===r.edge_before&&_.edge_after===r.edge_after&&(v.id=-1,_.id=-1,e=!0)}e&&(a.int_points1=a.int_points1.filter(c=>c.id>=0),a.int_points2=a.int_points2.filter(c=>c.id>=0),a.int_points1.forEach((c,_)=>c.id=_),a.int_points2.forEach((c,_)=>c.id=_))}function Un(a){for(let e of a)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of a)e.edge_before&&(e.edge_before.bvEnd=Ft),e.edge_after&&(e.edge_after.bvStart=Ft)}function Hn(a,e){for(let n of a)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function bh(a){let e,n,r,u=a.int_points1.length;for(let d=0;d<u;d++){let c=a.int_points1_sorted[d];c.face!==e&&(n=d,e=c.face);let _=d,v=Ue(a.int_points1_sorted,d,e),w;_+v<u&&a.int_points1_sorted[_+v].face===e?w=_+v:w=n;let y=Ue(a.int_points1_sorted,w,e);r=null;for(let F=w;F<w+y;F++){let U=a.int_points1_sorted[F];if(U.face===e&&a.int_points2[U.id].face===a.int_points2[c.id].face){r=U;break}}if(r===null)continue;let T=c.edge_after,C=r.edge_before;if(!(T.bv===Ft&&C.bv===Ft)||T!==C)continue;let q=a.int_points2[c.id],H=a.int_points2[r.id],I=q.edge_after,Q=H.edge_before;I.bv===Ft&&Q.bv===Ft&&I===Q||(q=a.int_points2[r.id],H=a.int_points2[c.id],I=q.edge_after,Q=H.edge_before),I.bv===Ft&&Q.bv===Ft&&I===Q&&T.setOverlap(I)}}function Ue(a,e,n){let r,u,d=1;if(a.length===1)return 1;r=a[e];for(let c=e+1;c<a.length&&!(r.face!==n||(u=a[c],!(u.pt.equalTo(r.pt)&&u.edge_before===r.edge_before&&u.edge_after===r.edge_after)));c++)d++;return d}function He(a,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=jn,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=ui),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=Be),n.is_vertex&ui){n.edge_before=r.prev,r.prev&&(n.is_vertex=Be);continue}if(n.is_vertex&Be)continue;let u=a.addVertex(n.pt,r);n.edge_before=u}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:a instanceof ye&&n.is_vertex&ui&&(n.edge_after=a.first)}}function xr(a,e,n){const r=a.edge_before,u=e.edge_after,d=n.length;r.next=n[0],n[0].prev=r,n[d-1].next=u,u.prev=n[d-1]}const{INSIDE:Wt,OUTSIDE:Vt,BOUNDARY:it,OVERLAP_SAME:Sh,OVERLAP_OPPOSITE:Eh}=Yi,{NOT_VERTEX:Bl,START_VERTEX:wr,END_VERTEX:Pr}=Yi,Xi=1,xi=2,me=3;function Ih(a,e){let[n,r]=wi(a,e,Xi,!0);return n}function Fn(a,e){let n=e.clone().reverse(),[r,u]=wi(a,n,me,!0);return r}function Xr(a,e){let[n,r]=wi(a,e,xi,!0);return n}function to(a,e){let[n,r]=wi(a,e,xi,!1),u=[];for(let c of n.faces)u=[...u,...[...c.edges].map(_=>_.shape)];let d=[];for(let c of r.faces)d=[...d,...[...c.edges].map(_=>_.shape)];return[u,d]}function Wn(a,e){let[n,r]=wi(a,e,me,!1),u=[];for(let d of n.faces)u=[...u,...[...d.edges].map(c=>c.shape)];return u}function eo(a,e){let n=a.clone(),r=e.clone(),u=io(n,r);_i(u),He(n,u.int_points1_sorted),He(r,u.int_points2_sorted),is(u),_i(u);let d=u.int_points1_sorted.map(_=>_.pt),c=u.int_points2_sorted.map(_=>_.pt);return[d,c]}function Ah(a,e,n,r){let u=Tr(a,n.int_points1),d=Tr(e,n.int_points2);for(Lr(u,e),Lr(d,a),Un(n.int_points1),Un(n.int_points2),Hn(n.int_points1,e),Hn(n.int_points2,a);Ch(a,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););bh(n),Vn(a,r,n.int_points1_sorted,!0),Vn(e,r,n.int_points2_sorted,!1),br(a,u,r,!0),br(e,d,r,!1)}function Oh(a,e,n,r){Mh(a,e,r,n.int_points2),kh(a,e,n),Gn(a,n.int_points1),Gn(e,n.int_points2),qn(a,n.int_points1,n.int_points2),qn(a,n.int_points2,n.int_points1)}function wi(a,e,n,r){let u=a.clone(),d=e.clone(),c=io(u,d);return _i(c),He(u,c.int_points1_sorted),He(d,c.int_points2_sorted),is(c),_i(c),Ah(u,d,c,n),r&&Oh(u,d,c,n),[u,d]}function io(a,e){let n={int_points1:[],int_points2:[]};for(let r of a.edges){let u=e.edges.search(r.box);for(let d of u){let c=r.shape.intersect(d.shape);for(let _ of c)De(r,_,n.int_points1),De(d,_,n.int_points2)}}return n}function Tr(a,e){let n=[];for(let r of a.faces)e.find(u=>u.face===r)||n.push(r);return n}function Lr(a,e){for(let n of a)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Ch(a,e,n,r,u,d){let c,_,v,w=r.length,y=!1;for(let T=0;T<w;T++){let C=r[T];C.face!==c&&(_=T,c=C.face);let q=T,H=Ue(r,T,c),I;q+H<w&&r[q+H].face===c?I=q+H:I=_;let Q=Ue(r,I,c);v=null;for(let O=I;O<I+Q;O++){let ot=r[O];if(ot.face===c&&u[ot.id].face===u[C.id].face){v=ot;break}}if(v===null)continue;let F=C.edge_after,U=v.edge_before;if(F.bv===it&&U.bv!=it){F.bv=U.bv;continue}if(F.bv!=it&&U.bv===it){U.bv=F.bv;continue}if(F.bv===it&&U.bv===it&&F!=U||F.bv===Wt&&U.bv===Vt||F.bv===Vt&&U.bv===Wt){let O=F.next;for(;O!=U;)O.bvStart=void 0,O.bvEnd=void 0,O.bv=void 0,O.setInclusion(e),O=O.next}if(F.bv===it&&U.bv===it&&F!=U){let O=F.next,ot;for(;O!=U;){if(O.bv!=it){if(ot===void 0)ot=O.bv;else if(O.bv!=ot)throw $.UNRESOLVED_BOUNDARY_CONFLICT}O=O.next}ot!=null&&(F.bv=ot,U.bv=ot);continue}if(F.bv===Wt&&U.bv===Vt||F.bv===Vt&&U.bv===Wt){let O=F;for(;O!=U;){if(O.bvStart===F.bv&&O.bvEnd===U.bv){let[ot,ee]=O.shape.distanceTo(e);if(ot<10*h.DP_TOL){De(O,ee.ps,n);let _t=n[n.length-1];if(_t.is_vertex&wr)_t.edge_after=O,_t.edge_before=O.prev,O.bvStart=it,O.bv=void 0,O.setInclusion(e);else if(_t.is_vertex&Pr)_t.edge_after=O.next,O.bvEnd=it,O.bv=void 0,O.setInclusion(e);else{let lt=e.addVertex(_t.pt,O);_t.edge_before=lt,_t.edge_after=lt.next,lt.setInclusion(e),lt.next.bvStart=it,lt.next.bvEnd=void 0,lt.next.bv=void 0,lt.next.setInclusion(e)}let qt=e.findEdgeByPoint(ee.pe);De(qt,ee.pe,u);let Pt=u[u.length-1];if(Pt.is_vertex&wr)Pt.edge_after=qt,Pt.edge_before=qt.prev;else if(Pt.is_vertex&Pr)Pt.edge_after=qt.next;else{let lt=u.find(at=>at.edge_after===qt),ut=e.addVertex(Pt.pt,qt);Pt.edge_before=ut,Pt.edge_after=ut.next,lt&&(lt.edge_after=ut),ut.bvStart=void 0,ut.bvEnd=it,ut.bv=void 0,ut.setInclusion(a),ut.next.bvStart=it,ut.next.bvEnd=void 0,ut.next.bv=void 0,ut.next.setInclusion(a)}_i(d),y=!0;break}}O=O.next}if(y)break;throw $.UNRESOLVED_BOUNDARY_CONFLICT}}return y}function Vn(a,e,n,r){if(!n)return;let u,d,c,_;for(let v=0;v<n.length;v++){if(c=n[v],c.face!==u&&(d=v,u=c.face),u.isEmpty())continue;let w=v,y=Ue(n,v,u),T;w+y<n.length&&n[w+y].face===c.face?T=w+y:T=d,_=n[T];let C=T,q=Ue(n,C,u),H=c.edge_after,I=_.edge_before;if(H.bv===Wt&&I.bv===Wt&&e===Xi||H.bv===Vt&&I.bv===Vt&&e===xi||(H.bv===Vt||I.bv===Vt)&&e===me&&!r||(H.bv===Wt||I.bv===Wt)&&e===me&&r||H.bv===it&&I.bv===it&&H.overlap&Sh&&r||H.bv===it&&I.bv===it&&H.overlap&Eh){a.removeChain(u,H,I);for(let Q=w;Q<w+y;Q++)n[Q].edge_after=void 0;for(let Q=C;Q<C+q;Q++)n[Q].edge_before=void 0}v+=y-1}}function Mh(a,e,n,r){for(let u of e.faces){for(let d of u)a.edges.add(d);r.find(d=>d.face===u)===void 0&&a.addFace(u.first,u.last)}}function kh(a,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let u=n.int_points1[r],d=n.int_points2[r];if(u.edge_before!==void 0&&u.edge_after===void 0&&d.edge_before===void 0&&d.edge_after!==void 0&&(u.edge_before.next=d.edge_after,d.edge_after.prev=u.edge_before,u.edge_after=d.edge_after,d.edge_before=u.edge_before),d.edge_before!==void 0&&d.edge_after===void 0&&u.edge_before===void 0&&u.edge_after!==void 0&&(d.edge_before.next=u.edge_after,u.edge_after.prev=d.edge_before,d.edge_after=u.edge_after,u.edge_before=d.edge_before),u.edge_before!==void 0&&u.edge_after===void 0)for(let c of n.int_points1_sorted)c!==u&&c.edge_before===void 0&&c.edge_after!==void 0&&c.pt.equalTo(u.pt)&&(u.edge_before.next=c.edge_after,c.edge_after.prev=u.edge_before,u.edge_after=c.edge_after,c.edge_before=u.edge_before);if(d.edge_before!==void 0&&d.edge_after===void 0)for(let c of n.int_points2_sorted)c!==d&&c.edge_before===void 0&&c.edge_after!==void 0&&c.pt.equalTo(d.pt)&&(d.edge_before.next=c.edge_after,c.edge_after.prev=d.edge_before,d.edge_after=c.edge_after,c.edge_before=d.edge_before)}}function Gn(a,e){for(let n of e)a.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function qn(a,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let u=r.edge_after,d=r.edge_before;try{Qn.testInfiniteLoop(u)}catch{throw $.CANNOT_COMPLETE_BOOLEAN_OPERATION}let c=a.addFace(u,d);for(let _ of e)_.edge_before&&_.edge_after&&_.edge_before.face===c&&_.edge_after.face===c&&(_.face=c);for(let _ of n)_.edge_before&&_.edge_after&&_.edge_before.face===c&&_.edge_after.face===c&&(_.face=c)}}function br(a,e,n,r){for(let u of e){let d=u.first.bv;(n===Xi&&d===Wt||n===me&&d===Wt&&r||n===me&&d===Vt&&!r||n===xi&&d===Vt)&&a.deleteFace(u)}}var Nh=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:xi,BOOLEAN_SUBTRACT:me,BOOLEAN_UNION:Xi,calculateIntersections:eo,innerClip:to,intersect:Xr,outerClip:Wn,removeNotRelevantChains:Vn,removeOldFaces:Gn,restoreFaces:qn,subtract:Fn,unify:Ih});const zh=RegExp("T.F..FFF.|T.F...F.."),Bh=RegExp("T........|.T.......|...T.....|....T...."),Rh=RegExp("FT.......|F..T.....|F...T...."),Zh=RegExp("T.F..F..."),Dh=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Ve{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return zh.test(this.toString())}intersect(){return Bh.test(this.toString())}touch(){return Rh.test(this.toString())}inside(){return Zh.test(this.toString())}covered(){return Dh.test(this.toString())}}function ci(a,e){let n,r=new h.Ray(e),u=new h.Line(r.pt,r.norm);const d=new h.Box(r.box.xmin-h.DP_TOL,r.box.ymin-h.DP_TOL,r.box.xmax,r.box.ymax+h.DP_TOL);if(a.box.not_intersect(d))return h.OUTSIDE;let c=a.edges.search(d);if(c.length===0)return h.OUTSIDE;for(let y of c)if(y.shape.contains(e))return h.BOUNDARY;let _=[...a.faces],v=[];for(let y of c)for(let T of r.intersect(y.shape)){if(T.equalTo(e))return h.BOUNDARY;v.push({pt:T,edge:y,face_index:_.indexOf(y.face)})}v.sort((y,T)=>Dr(y.pt.x,T.pt.x)?-1:Zr(y.pt.x,T.pt.x)?1:y.face_index<T.face_index?-1:y.face_index>T.face_index?1:y.edge.arc_length<T.edge.arc_length?-1:y.edge.arc_length>T.edge.arc_length?1:0);let w=0;for(let y=0;y<v.length;y++){let T=v[y];if(T.pt.equalTo(T.edge.shape.start)){if(y>0&&T.pt.equalTo(v[y-1].pt)&&T.face_index===v[y-1].face_index&&T.edge.prev===v[y-1].edge)continue;let C=T.edge.prev;for(;Dn(C.length);)C=C.prev;let q=C.shape.tangentInEnd(),H=T.pt.translate(q),I=T.edge.shape.tangentInStart(),Q=T.pt.translate(I),F=H.leftTo(u),U=Q.leftTo(u);(F&&!U||!F&&U)&&w++}else if(T.pt.equalTo(T.edge.shape.end)){if(y>0&&T.pt.equalTo(v[y-1].pt)&&T.face_index===v[y-1].face_index&&T.edge.next===v[y-1].edge)continue;let C=T.edge.next;for(;Dn(C.length);)C=C.next;let q=C.shape.tangentInStart(),H=T.pt.translate(q),I=T.edge.shape.tangentInEnd(),Q=T.pt.translate(I),F=H.leftTo(u),U=Q.leftTo(u);(F&&!U||!F&&U)&&w++}else if(T.edge.shape instanceof h.Segment)w++;else{let C=T.edge.shape.box;_e(T.pt.y,C.ymin)||_e(T.pt.y,C.ymax)||w++}}return n=w%2===1?$i:zr,n}function Uh(a,e){return Ge(a,e).equal()}function no(a,e){return Ge(a,e).intersect()}function Hh(a,e){return Ge(a,e).touch()}function Fh(a,e){return!no(a,e)}function so(a,e){return Ge(a,e).inside()}function ro(a,e){return Ge(a,e).covered()}function Wh(a,e){return so(e,a)}function oo(a,e){return ro(e,a)}function Ge(a,e){if(a instanceof h.Line&&e instanceof h.Line)return Vh(a,e);if(a instanceof h.Line&&e instanceof h.Circle)return Gh(a,e);if(a instanceof h.Line&&e instanceof h.Box)return qh(a,e);if(a instanceof h.Line&&e instanceof h.Polygon)return $h(a,e);if((a instanceof h.Segment||a instanceof h.Arc)&&e instanceof h.Polygon)return Sr(a,e);if((a instanceof h.Segment||a instanceof h.Arc)&&(e instanceof h.Circle||e instanceof h.Box))return Sr(a,new h.Polygon(e));if(a instanceof h.Polygon&&e instanceof h.Polygon)return Fi(a,e);if((a instanceof h.Circle||a instanceof h.Box)&&(e instanceof h.Circle||e instanceof h.Box))return Fi(new h.Polygon(a),new h.Polygon(e));if((a instanceof h.Circle||a instanceof h.Box)&&e instanceof h.Polygon)return Fi(new h.Polygon(a),e);if(a instanceof h.Polygon&&(e instanceof h.Circle||e instanceof h.Box))return Fi(a,new h.Polygon(e))}function Vh(a,e){let n=new Ve,r=Fe(a,e);return r.length===0?a.contains(e.pt)&&e.contains(a.pt)?(n.I2I=[a],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[a],n.E2I=[e]):(n.I2I=r,n.I2E=a.split(r),n.E2I=e.split(r)),n}function Gh(a,e){let n=new Ve,r=ve(a,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[a],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=a.split(r),n.E2I=[e];else{let u=new ye([a]),d=a.sortPoints(r);u.split(d);let c=u.toShapes();n.I2I=[c[1]],n.I2B=d,n.I2E=[c[0],c[2]],n.E2I=new h.Polygon([e.toArc()]).cutWithLine(a)}return n}function qh(a,e){let n=new Ve,r=Ze(a,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[a],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=a.split(r),n.E2I=[e];else{let u=new ye([a]),d=a.sortPoints(r);u.split(d);let c=u.toShapes();e.toSegments().some(_=>_.contains(r[0])&&_.contains(r[1]))?(n.I2I=[],n.I2B=[c[1]],n.I2E=[c[0],c[2]],n.E2I=[e]):(n.I2I=[c[1]],n.I2B=d,n.I2E=[c[0],c[2]],n.E2I=new h.Polygon(e.toSegments()).cutWithLine(a))}return n}function $h(a,e){let n=new Ve,r=vi(a,e),u=new ye([a]),d=r.length>0?r.slice():a.sortPoints(r);return u.split(d),[...u].forEach(c=>c.setInclusion(e)),n.I2I=[...u].filter(c=>c.bv===h.INSIDE).map(c=>c.shape),n.I2B=[...u].slice(1).map(c=>c.bv===h.BOUNDARY?c.shape:c.shape.start),n.I2E=[...u].filter(c=>c.bv===h.OUTSIDE).map(c=>c.shape),n.E2I=e.cutWithLine(a),n}function Sr(a,e){let n=new Ve,r=yh(a,e),u=r.length>0?r.slice():a.sortPoints(r),d=new ye([a]);d.split(u),[...d].forEach(c=>c.setInclusion(e)),n.I2I=[...d].filter(c=>c.bv===h.INSIDE).map(c=>c.shape),n.I2B=[...d].slice(1).map(c=>c.bv===h.BOUNDARY?c.shape:c.shape.start),n.I2E=[...d].filter(c=>c.bv===h.OUTSIDE).map(c=>c.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let c of[a.start,a.end])switch(ci(e,c)){case h.INSIDE:n.B2I.push(c);break;case h.BOUNDARY:n.B2B.push(c);break;case h.OUTSIDE:n.B2E.push(c);break}return n}function Fi(a,e){let n=new Ve,[r,u]=eo(a,e),d=Xr(a,e),c=Fn(a,e),_=Fn(e,a),[v,w]=to(a,e),y=Wn(a,e),T=Wn(e,a);return n.I2I=d.isEmpty()?[]:[d],n.I2B=w,n.I2E=c.isEmpty()?[]:[c],n.B2I=v,n.B2B=r,n.B2E=y,n.E2I=_.isEmpty()?[]:[_],n.E2B=T,n}var Yh=Object.freeze({__proto__:null,contain:Wh,cover:oo,covered:ro,disjoint:Fh,equal:Uh,inside:so,intersect:no,relate:Ge,touch:Hh});let fi=class Ce{constructor(e=1,n=0,r=0,u=1,d=0,c=0){this.a=e,this.b=n,this.c=r,this.d=u,this.tx=d,this.ty=c}clone(){return new Ce(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new Ce(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw $.ILLEGAL_PARAMETERS;return this.multiply(new Ce(1,0,0,1,n,r))}rotate(e,n=0,r=0){let u=Math.cos(e),d=Math.sin(e);return this.translate(n,r).multiply(new Ce(u,d,-d,u,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new Ce(e,0,0,n,0,0))}equalTo(e){return!(!h.Utils.EQ(this.tx,e.tx)||!h.Utils.EQ(this.ty,e.ty)||!h.Utils.EQ(this.a,e.a)||!h.Utils.EQ(this.b,e.b)||!h.Utils.EQ(this.c,e.c)||!h.Utils.EQ(this.d,e.d))}};h.Matrix=fi;const jh=(...a)=>new h.Matrix(...a);h.matrix=jh;const Qh=class $n{constructor(e,n){this.low=e,this.high=n}clone(){return new $n(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new $n(this.low===void 0?e.low:Math.min(this.low,e.low),this.high===void 0?e.high:Math.max(this.high,e.high))}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},st=0,W=1;class Ae{constructor(e=void 0,n=void 0,r=null,u=null,d=null,c=W){this.left=r,this.right=u,this.parent=d,this.color=c,this.item={key:e,value:n},e&&e instanceof Array&&e.length==2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])&&(this.item.key=new Qh(Math.min(e[0],e[1]),Math.max(e[0],e[1]))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===W}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value==e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class mi{constructor(){this.root=null,this.nil_node=new Ae}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root==this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new Ae(e,n,this.nil_node,this.nil_node,null,st);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new Ae(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new Ae(e,n),u=this.tree_search(this.root,r);return u&&this.tree_delete(u),u}search(e,n=(r,u)=>r===u?u.output():r){let r=new Ae(e),u=[];return this.tree_search_interval(this.root,r,u),u.map(d=>n(d.item.value,d.item.key))}intersect_any(e){let n=new Ae(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new mi;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root==this.nil_node)this.root=e;else{for(;n!=this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!=this.root&&n.parent.color==st;)n.parent==n.parent.parent.left?(r=n.parent.parent.right,r.color==st?(n.parent.color=W,r.color=W,n.parent.parent.color=st,n=n.parent.parent):(n==n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=W,n.parent.parent.color=st,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color==st?(n.parent.color=W,r.color=W,n.parent.parent.color=st,n=n.parent.parent):(n==n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=W,n.parent.parent.color=st,this.rotate_left(n.parent.parent)));this.root.color=W}tree_delete(e){let n,r;e.left==this.nil_node||e.right==this.nil_node?n=e:n=this.tree_successor(e),n.left!=this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n==this.root?this.root=r:(n==n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!=e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color==W&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!=this.root&&n.parent!=null&&n.color==W;)n==n.parent.left?(r=n.parent.right,r.color==st&&(r.color=W,n.parent.color=st,this.rotate_left(n.parent),r=n.parent.right),r.left.color==W&&r.right.color==W?(r.color=st,n=n.parent):(r.right.color==W&&(r.color=st,r.left.color=W,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=W,r.right.color=W,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color==st&&(r.color=W,n.parent.color=st,this.rotate_right(n.parent),r=n.parent.left),r.left.color==W&&r.right.color==W?(r.color=st,n=n.parent):(r.left.color==W&&(r.color=st,r.right.color=W,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=W,r.left.color=W,this.rotate_right(n.parent),n=this.root));n.color=W}tree_search(e,n){if(!(e==null||e==this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_interval(e,n,r){e!=null&&e!=this.nil_node&&(e.left!=this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!=this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!=this.nil_node&&(e.left!=this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!=this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!=this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!=this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,u;if(e.right!=this.nil_node)n=this.local_minimum(e.right);else{for(r=e,u=e.parent;u!=null&&u.right==r;)r=u,u=u.parent;n=u}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!=this.nil_node&&(n.left.parent=e),n.parent=e.parent,e==this.root?this.root=n:e==e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!=this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!=this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!=this.nil_node&&(n.right.parent=e),n.parent=e.parent,e==this.root?this.root=n:e==e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!=null&&e!=this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!=this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!=this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color==st&&(n.left.color==W&&n.right.color==W||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,u=0;if(e.color==W&&n++,e.left!=this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!=this.nil_node?u=this.testBlackHeightProperty(e.right):u=1,r!=u)throw new Error("Red-black height property violated");return n+=r,n}}class Kh extends Set{constructor(e){super(e),this.index=new mi,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:u}=e,d=r||e.box,c=u||e;return super.add(c),this.size>n&&this.index.insert(d,c),this}delete(e){const{key:n,value:r}=e,u=n||e.box,d=r||e;let c=super.delete(d);return c&&this.index.remove(u,d),c}clear(){super.clear(),this.index=new mi}search(e){return this.index.search(e)}hit(e){let n=new h.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(r=>e.on(r))}svg(){return[...this].reduce((e,n)=>e+n.svg(),"")}}h.PlanarSet=Kh;class le{get name(){throw $.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw $.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw $.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new fi().translate(...e))}rotate(e,n=new h.Point){return this.transform(new fi().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new fi().scale(e,n))}transform(...e){throw $.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw $.CANNOT_INVOKE_ABSTRACT_METHOD}}let Jh=class ao extends le{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw $.ILLEGAL_PARAMETERS}}get box(){return new h.Box(this.x,this.y,this.x,this.y)}clone(){return new h.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return h.Utils.EQ(this.x,e.x)&&h.Utils.EQ(this.y,e.y)}lessThan(e){return!!(h.Utils.LT(this.y,e.y)||h.Utils.EQ(this.y,e.y)&&h.Utils.LT(this.x,e.x))}transform(e){return new h.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new h.Vector(this,e.pt);if(h.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),u=e.norm.multiply(r);return this.translate(u)}leftTo(e){let n=new h.Vector(e.pt,this);return h.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof ao){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new h.Segment(this,e)]}if(e instanceof h.Line)return h.Distance.point2line(this,e);if(e instanceof h.Circle)return h.Distance.point2circle(this,e);if(e instanceof h.Segment)return h.Distance.point2segment(this,e);if(e instanceof h.Arc)return h.Distance.point2arc(this,e);if(e instanceof h.Polygon)return h.Distance.point2polygon(this,e);if(e instanceof h.PlanarSet)return h.Distance.shape2planarSet(this,e);if(e instanceof h.Multiline)return h.Distance.shape2multiline(this,e)}on(e){if(e instanceof h.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw h.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${ge({fill:"red",...e})} />`}};h.Point=Jh;const Xh=(...a)=>new h.Point(...a);h.point=Xh;let tl=class extends le{constructor(...a){if(super(),this.x=0,this.y=0,a.length!==0){if(a.length===1&&a[0]instanceof Array&&a[0].length===2){let e=a[0];if(typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}}if(a.length===1&&a[0]instanceof Object&&a[0].name==="vector"){let{x:e,y:n}=a[0];this.x=e,this.y=n;return}if(a.length===2){let e=a[0],n=a[1];if(typeof e=="number"&&typeof n=="number"){this.x=e,this.y=n;return}if(e instanceof h.Point&&n instanceof h.Point){this.x=n.x-e.x,this.y=n.y-e.y;return}}throw $.ILLEGAL_PARAMETERS}}clone(){return new h.Vector(this.x,this.y)}get slope(){let a=Math.atan2(this.y,this.x);return a<0&&(a=2*Math.PI+a),a}get length(){return Math.sqrt(this.dot(this))}equalTo(a){return h.Utils.EQ(this.x,a.x)&&h.Utils.EQ(this.y,a.y)}multiply(a){return new h.Vector(a*this.x,a*this.y)}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}normalize(){if(!h.Utils.EQ_0(this.length))return new h.Vector(this.x/this.length,this.y/this.length);throw $.ZERO_DIVISION}rotate(a,e=new h.Point){if(e.x===0&&e.y===0)return this.transform(new fi().rotate(a));throw $.OPERATION_IS_NOT_SUPPORTED}transform(a){return new h.Vector(a.transform([this.x,this.y]))}rotate90CCW(){return new h.Vector(-this.y,this.x)}rotate90CW(){return new h.Vector(this.y,-this.x)}invert(){return new h.Vector(-this.x,-this.y)}add(a){return new h.Vector(this.x+a.x,this.y+a.y)}subtract(a){return new h.Vector(this.x-a.x,this.y-a.y)}angleTo(a){let e=this.normalize(),n=a.normalize(),r=Math.atan2(e.cross(n),e.dot(n));return r<0&&(r+=2*Math.PI),r}projectionOn(a){let e=a.normalize(),n=this.dot(e);return e.multiply(n)}get name(){return"vector"}};h.Vector=tl;const ho=(...a)=>new h.Vector(...a);h.vector=ho;let el=class Yn extends le{constructor(...e){if(super(),this.ps=new h.Point,this.pe=new h.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new h.Point(n[0],n[1]),this.pe=new h.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new h.Point(n.x,n.y),this.pe=new h.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof h.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof h.Point&&e[1]instanceof h.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new h.Point(e[0],e[1]),this.pe=new h.Point(e[2],e[3]);return}throw $.ILLEGAL_PARAMETERS}}clone(){return new h.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new h.Vector(this.start,this.end).slope}get box(){return new h.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return h.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof h.Point)return this.contains(e)?[e]:[];if(e instanceof h.Line)return gi(this,e);if(e instanceof h.Ray)return ts(e,this);if(e instanceof h.Segment)return Ki(this,e);if(e instanceof h.Circle)return Ji(this,e);if(e instanceof h.Box)return fh(this,e);if(e instanceof h.Arc)return We(this,e);if(e instanceof h.Polygon)return Jn(this,e);if(e instanceof h.Multiline)return yi(this,e)}distanceTo(e){if(e instanceof h.Point){let[n,r]=h.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Circle){let[n,r]=h.Distance.segment2circle(this,e);return[n,r]}if(e instanceof h.Line){let[n,r]=h.Distance.segment2line(this,e);return[n,r]}if(e instanceof h.Segment){let[n,r]=h.Distance.segment2segment(this,e);return[n,r]}if(e instanceof h.Arc){let[n,r]=h.Distance.segment2arc(this,e);return[n,r]}if(e instanceof h.Polygon){let[n,r]=h.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof h.PlanarSet){let[n,r]=h.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof h.Multiline)return h.Distance.shape2multiline(this,e)}tangentInStart(){return new h.Vector(this.start,this.end).normalize()}tangentInEnd(){return new h.Vector(this.end,this.start).normalize()}reverse(){return new Yn(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new h.Segment(this.start,e),new h.Segment(e,this.end)]}middle(){return new h.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new h.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=h.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,u=this.end.y-e;return n*(r+u)/2}transform(e=new h.Matrix){return new Yn(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new h.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${ge(e)} />`}};h.Segment=el;const il=(...a)=>new h.Segment(...a);h.segment=il;let{vector:ai}=h,nl=class lo extends le{constructor(...e){if(super(),this.pt=new h.Point,this.norm=new h.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new h.Point(n),this.norm=new h.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof h.Point&&r instanceof h.Point){this.pt=n,this.norm=lo.points2norm(n,r),this.norm.dot(ai(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof h.Point&&r instanceof h.Vector){if(h.Utils.EQ_0(r.x)&&h.Utils.EQ_0(r.y))throw $.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(ai(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof h.Vector&&r instanceof h.Point){if(h.Utils.EQ_0(n.x)&&h.Utils.EQ_0(n.y))throw $.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(ai(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw $.ILLEGAL_PARAMETERS}}clone(){return new h.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new h.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new h.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(ai(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return h.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new h.Vector(this.pt,e);return h.Utils.EQ_0(this.norm.dot(n))}coord(e){return ai(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof h.Point)return this.contains(e)?[e]:[];if(e instanceof h.Line)return Fe(this,e);if(e instanceof h.Ray)return Qr(e,this);if(e instanceof h.Circle)return ve(this,e);if(e instanceof h.Box)return Ze(this,e);if(e instanceof h.Segment)return gi(e,this);if(e instanceof h.Arc)return Qi(this,e);if(e instanceof h.Polygon)return vi(this,e);if(e instanceof h.Multiline)return yi(this,e)}distanceTo(e){if(e instanceof h.Point){let[n,r]=h.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Circle){let[n,r]=h.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Segment){let[n,r]=h.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof h.Arc){let[n,r]=h.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof h.Polygon){let[n,r]=h.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof h.Point)return[new h.Ray(e,this.norm),new h.Ray(e,this.norm)];{let n=new h.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new h.Point){return new h.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new h.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=Ze(this,e);if(r.length===0)return"";let u=r[0],d=r.length===2?r[1]:r.find(c=>!c.equalTo(u));return d===void 0&&(d=u),new h.Segment(u,d).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw $.ILLEGAL_PARAMETERS;return new h.Vector(e,n).normalize().rotate90CCW()}};h.Line=nl;const sl=(...a)=>new h.Line(...a);h.line=sl;let rl=class extends le{constructor(...a){if(super(),this.pc=new h.Point,this.r=1,a.length===1&&a[0]instanceof Object&&a[0].name==="circle"){let{pc:e,r:n}=a[0];this.pc=new h.Point(e),this.r=n}else{let[e,n]=[...a];e&&e instanceof h.Point&&(this.pc=e.clone()),n!==void 0&&(this.r=n)}}clone(){return new h.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new h.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(a){if(a instanceof h.Point)return h.Utils.LE(a.distanceTo(this.center)[0],this.r);if(a instanceof h.Segment)return h.Utils.LE(a.start.distanceTo(this.center)[0],this.r)&&h.Utils.LE(a.end.distanceTo(this.center)[0],this.r);if(a instanceof h.Arc)return this.intersect(a).length===0&&h.Utils.LE(a.start.distanceTo(this.center)[0],this.r)&&h.Utils.LE(a.end.distanceTo(this.center)[0],this.r);if(a instanceof h.Circle)return this.intersect(a).length===0&&h.Utils.LE(a.r,this.r)&&h.Utils.LE(a.center.distanceTo(this.center)[0],this.r)}toArc(a=!0){return new h.Arc(this.center,this.r,Math.PI,-Math.PI,a)}scale(a,e){if(a!==e||!(this.pc.x===0&&this.pc.y===0))throw $.OPERATION_IS_NOT_SUPPORTED;return new h.Circle(this.pc,this.r*a)}transform(a=new h.Matrix){return new h.Circle(this.pc.transform(a),this.r)}intersect(a){if(a instanceof h.Point)return this.contains(a)?[a]:[];if(a instanceof h.Line)return ve(a,this);if(a instanceof h.Ray)return jr(a,this);if(a instanceof h.Segment)return Ji(a,this);if(a instanceof h.Circle)return Ur(a,this);if(a instanceof h.Box)return dh(this,a);if(a instanceof h.Arc)return Kn(a,this);if(a instanceof h.Polygon)return Gr(this,a);if(a instanceof h.Multiline)return yi(this,a)}distanceTo(a){if(a instanceof h.Point){let[e,n]=h.Distance.point2circle(a,this);return n=n.reverse(),[e,n]}if(a instanceof h.Circle){let[e,n]=h.Distance.circle2circle(this,a);return[e,n]}if(a instanceof h.Line){let[e,n]=h.Distance.circle2line(this,a);return[e,n]}if(a instanceof h.Segment){let[e,n]=h.Distance.segment2circle(a,this);return n=n.reverse(),[e,n]}if(a instanceof h.Arc){let[e,n]=h.Distance.arc2circle(a,this);return n=n.reverse(),[e,n]}if(a instanceof h.Polygon){let[e,n]=h.Distance.shape2polygon(this,a);return[e,n]}if(a instanceof h.PlanarSet){let[e,n]=h.Distance.shape2planarSet(this,a);return[e,n]}if(a instanceof h.Multiline){let[e,n]=h.Distance.shape2multiline(this,a);return[e,n]}}get name(){return"circle"}svg(a={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${ge({fill:"none",...a})} />`}};h.Circle=rl;const ol=(...a)=>new h.Circle(...a);h.circle=ol;class al extends le{constructor(...e){if(super(),this.pc=new h.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=h.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:u,endAngle:d,counterClockwise:c}=e[0];this.pc=new h.Point(n.x,n.y),this.r=r,this.startAngle=u,this.endAngle=d,this.counterClockwise=c}else{let[n,r,u,d,c]=[...e];n&&n instanceof h.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),u!==void 0&&(this.startAngle=u),d!==void 0&&(this.endAngle=d),c!==void 0&&(this.counterClockwise=c)}}clone(){return new h.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(h.Utils.EQ(this.startAngle,this.endAngle))return 0;if(h.Utils.EQ(Math.abs(this.startAngle-this.endAngle),h.PIx2))return h.PIx2;let e;return this.counterClockwise?e=h.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+h.PIx2:e=h.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+h.PIx2,h.Utils.GT(e,h.PIx2)&&(e-=h.PIx2),h.Utils.LT(e,0)&&(e+=h.PIx2),e}get start(){return new h.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new h.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let e=this.breakToFunctional().reduce((n,r)=>n.merge(r.start.box),new h.Box);return e=e.merge(this.end.box),e}contains(e){if(!h.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new h.Vector(this.pc,e).slope,r=new h.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return h.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new h.Vector(this.pc,e).slope;return[new h.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new h.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new h.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new h.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof h.Point)return this.contains(e)?[e]:[];if(e instanceof h.Line)return Qi(e,this);if(e instanceof h.Ray)return es(e,this);if(e instanceof h.Circle)return Kn(this,e);if(e instanceof h.Segment)return We(e,this);if(e instanceof h.Box)return ph(this,e);if(e instanceof h.Arc)return Hr(this,e);if(e instanceof h.Polygon)return Xn(this,e);if(e instanceof h.Multiline)return yi(this,e)}distanceTo(e){if(e instanceof h.Point){let[n,r]=h.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Circle){let[n,r]=h.Distance.arc2circle(this,e);return[n,r]}if(e instanceof h.Line){let[n,r]=h.Distance.arc2line(this,e);return[n,r]}if(e instanceof h.Segment){let[n,r]=h.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Arc){let[n,r]=h.Distance.arc2arc(this,e);return[n,r]}if(e instanceof h.Polygon){let[n,r]=h.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof h.PlanarSet){let[n,r]=h.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof h.Multiline)return h.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],u=[];for(let d=0;d<4;d++)r[d].on(this)&&u.push(new h.Arc(this.pc,this.r,this.startAngle,n[d],this.counterClockwise));if(u.length===0)e.push(this.clone());else{u.sort((_,v)=>_.length-v.length);for(let _=0;_<u.length;_++){let v=e.length>0?e[e.length-1]:void 0,w;v?w=new h.Arc(this.pc,this.r,v.endAngle,u[_].endAngle,this.counterClockwise):w=new h.Arc(this.pc,this.r,this.startAngle,u[_].endAngle,this.counterClockwise),h.Utils.EQ_0(w.length)||e.push(w.clone())}let d=e.length>0?e[e.length-1]:void 0,c;d?c=new h.Arc(this.pc,this.r,d.endAngle,this.endAngle,this.counterClockwise):c=new h.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!h.Utils.EQ_0(c.length)&&!h.Utils.EQ(c.sweep,2*Math.PI)&&e.push(c.clone())}return e}tangentInStart(){let e=new h.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new h.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new h.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new h.Matrix){let n=this.start.transform(e),r=this.end.transform(e),u=this.pc.transform(e),d=this.counterClockwise;return e.a*e.d<0&&(d=!d),h.Arc.arcSE(u,n,r,d)}static arcSE(e,n,r,u){let{vector:d}=h,c=d(e,n).slope,_=d(e,r).slope;h.Utils.EQ(c,_)&&(_+=2*Math.PI,u=!0);let v=d(e,n).length;return new h.Arc(e,v,c,_,u)}definiteIntegral(e=0){return this.breakToFunctional().reduce((n,r)=>n+r.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new h.Line(this.start,this.end),r=this.pc.leftTo(n),u=new h.Segment(this.start,this.end).definiteIntegral(e),d=this.circularSegmentArea();return r?u-d:u+d}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=h;return e.slice().sort((r,u)=>{let d=n(this.pc,r).slope,c=n(this.pc,u).slope;return d<c?-1:d>c?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return h.Utils.EQ(this.sweep,2*Math.PI)?new h.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${ge({fill:"none",...e})} />`}}h.Arc=al;const hl=(...a)=>new h.Arc(...a);h.arc=hl;class di extends le{constructor(e=void 0,n=void 0,r=void 0,u=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=u}clone(){return new di(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new h.Point(this.xmin,this.ymin)}get high(){return new h.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new h.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new di(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,u){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=u}toPoints(){return[new h.Point(this.xmin,this.ymin),new h.Point(this.xmax,this.ymin),new h.Point(this.xmax,this.ymax),new h.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new h.Segment(e[0],e[1]),new h.Segment(e[1],e[2]),new h.Segment(e[2],e[3]),new h.Segment(e[3],e[0])]}rotate(e,n=new h.Point){throw $.OPERATION_IS_NOT_SUPPORTED}transform(e=new h.Matrix){return this.toPoints().map(n=>n.transform(e)).reduce((n,r)=>n.merge(r.box),new di)}contains(e){if(e instanceof h.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof h.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof h.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof h.Circle)return this.contains(e.box);if(e instanceof h.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>We(n,e).length===0);if(e instanceof h.Line||e instanceof h.Ray)return!1;if(e instanceof h.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof h.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(u=>u.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(u=>{u[0]<r[0]&&(r=u)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${ge({fill:"none",...e})} />`}}h.Box=di;const ll=(...a)=>new h.Box(...a);h.box=ll;class ul{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof h.Segment}get isArc(){return this.shape instanceof h.Arc}get isLine(){return this.shape instanceof h.Line}get isRay(){return this.shape instanceof h.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof h.Line||this.shape instanceof h.Ray)return this.bv=h.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=ci(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=ci(e,this.end)),this.bvStart===h.OUTSIDE||this.bvEnd==h.OUTSIDE)this.bv=h.OUTSIDE;else if(this.bvStart===h.INSIDE||this.bvEnd==h.INSIDE)this.bv=h.INSIDE;else{let n=ci(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,u=e.shape;r instanceof h.Segment&&u instanceof h.Segment?r.start.equalTo(u.start)&&r.end.equalTo(u.end)?n=h.OVERLAP_SAME:r.start.equalTo(u.end)&&r.end.equalTo(u.start)&&(n=h.OVERLAP_OPPOSITE):(r instanceof h.Arc&&u instanceof h.Arc||r instanceof h.Segment&&u instanceof h.Arc||r instanceof h.Arc&&u instanceof h.Segment)&&(r.start.equalTo(u.start)&&r.end.equalTo(u.end)&&r.middle().equalTo(u.middle())?n=h.OVERLAP_SAME:r.start.equalTo(u.end)&&r.end.equalTo(u.start)&&r.middle().equalTo(u.middle())&&(n=h.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof h.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof h.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(h.Utils.EQ(e.sweep,2*Math.PI)){let u=e.counterClockwise?1:-1,d=new h.Arc(e.pc,e.r,e.startAngle,e.startAngle+u*Math.PI,e.counterClockwise),c=new h.Arc(e.pc,e.r,e.startAngle+u*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${d.r},${d.r} 0 ${n},${r} ${d.end.x},${d.end.y}
                    A${c.r},${c.r} 0 ${n},${r} ${c.end.x},${c.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}h.Edge=ul;class cl extends Qn{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class Ne extends cl{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(u=>u instanceof h.Point)){let u=Ne.points2segments(r);this.shapes2face(e.edges,u)}else if(r.every(u=>u instanceof Array&&u.length===2)){let u=r.map(c=>new h.Point(c[0],c[1])),d=Ne.points2segments(u);this.shapes2face(e.edges,d)}else if(r.every(u=>u instanceof h.Segment||u instanceof h.Arc))this.shapes2face(e.edges,r);else if(r.every(u=>u.name==="segment"||u.name==="arc")){let u=[];for(let d of r){let c;d.name==="segment"?c=new h.Segment(d):c=new h.Arc(d),u.push(c)}this.shapes2face(e.edges,u)}}else if(n[0]instanceof Ne){let r=n[0];this.first=r.first,this.last=r.last;for(let u of r)e.edges.add(u)}else if(n[0]instanceof h.Circle)this.shapes2face(e.edges,[n[0].toArc(Nr)]);else if(n[0]instanceof h.Box){let r=n[0];this.shapes2face(e.edges,[new h.Segment(new h.Point(r.xmin,r.ymin),new h.Point(r.xmax,r.ymin)),new h.Segment(new h.Point(r.xmax,r.ymin),new h.Point(r.xmax,r.ymax)),new h.Segment(new h.Point(r.xmax,r.ymax),new h.Point(r.xmin,r.ymax)),new h.Segment(new h.Point(r.xmin,r.ymax),new h.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof h.Edge&&n[1]instanceof h.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new h.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new h.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let u=new h.Edge(r);this.append(u),e.add(u)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();h.Utils.EQ_0(e)?this._orientation=Gi.NOT_ORIENTABLE:h.Utils.LT(e,0)?this._orientation=Gi.CCW:this._orientation=Gi.CW}return this._orientation}isSimple(e){return Ne.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let u=[];for(let d of e){let c=n.search(d.box);for(let _ of c){if(d===_||_.face!==e||d.shape instanceof h.Segment&&_.shape instanceof h.Segment&&(d.next===_||d.prev===_))continue;let v=d.shape.intersect(_.shape);for(let w of v)if(!(w.equalTo(d.start)&&w.equalTo(_.end)&&_===d.prev)&&!(w.equalTo(d.end)&&w.equalTo(_.start)&&_===d.next)&&(u.push(w),r))break;if(u.length>0&&r)break}if(u.length>0&&r)break}return u}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new h.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}h.Face=Ne;class ns extends le{constructor(...e){if(super(),this.pt=new h.Point,this.norm=new h.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof h.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof h.Vector){this.norm=e[1].clone();return}throw $.ILLEGAL_PARAMETERS}}clone(){return new ns(this.pt,this.norm)}get slope(){return new h.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new h.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new h.Vector(this.pt,e);return h.Utils.EQ_0(this.norm.dot(n))&&h.Utils.GE(n.cross(this.norm),0)}coord(e){return ho(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new h.Segment(this.pt,e),new h.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof h.Point)return this.contains(e)?[e]:[];if(e instanceof h.Segment)return ts(this,e);if(e instanceof h.Arc)return es(this,e);if(e instanceof h.Line)return Qr(this,e);if(e instanceof h.Ray)return wh(this,e);if(e instanceof h.Circle)return jr(this,e);if(e instanceof h.Box)return xh(this,e);if(e instanceof h.Polygon)return Kr(this,e)}rotate(e,n=new h.Point){return new h.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new h.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new h.Line(this.pt,this.norm),u=Ze(r,e);return u=u.filter(d=>this.contains(d)),u.length===0||u.length===2?"":new h.Segment(this.pt,u[0]).svg(n)}}h.Ray=ns;const fl=(...a)=>new h.Ray(...a);h.ray=fl;let dl=class Me{constructor(){this.faces=new h.PlanarSet,this.edges=new h.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof h.Circle||e[0]instanceof h.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new h.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(u=>u instanceof Array&&u.length===2&&typeof u[0]=="number"&&typeof u[1]=="number"))for(let u of r)this.faces.add(new h.Face(this,u));else this.faces.add(new h.Face(this,r));else this.faces.add(new h.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new h.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new Me;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new h.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let u=n;u!==r.next;u=u.next)if(e.remove(u),this.edges.delete(u),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let u=new h.Edge(r[0]),d=n.prev;return n.face.insert(u,d),this.edges.delete(n),this.edges.add(u),n.shape=r[1],this.edges.add(n),u}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let c of e.edges)for(let _ of n.edges){let v=qr(c,_);for(let w of v)De(c,w,r.int_points1),De(_,w,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=ae(r.int_points1),r.int_points2_sorted=ae(r.int_points2),He(e,r.int_points1_sorted),He(n,r.int_points2_sorted),is(r),r.int_points1_sorted=ae(r.int_points1),r.int_points2_sorted=ae(r.int_points2),Un(r.int_points1),Hn(r.int_points1,n);for(let c of r.int_points1_sorted)c.edge_before&&c.edge_after&&c.edge_before.bv===c.edge_after.bv&&(r.int_points2[c.id]=-1,c.id=-1);if(r.int_points1=r.int_points1.filter(c=>c.id>=0),r.int_points2=r.int_points2.filter(c=>c.id>=0),r.int_points1.forEach((c,_)=>{c.id=_}),r.int_points2.forEach((c,_)=>{c.id=_}),r.int_points1.length===0)return n;r.int_points1_sorted=ae(r.int_points1),r.int_points2_sorted=ae(r.int_points2);let u,d;for(let c=1;c<r.int_points1_sorted.length;c++)if(d=r.int_points1_sorted[c],u=r.int_points1_sorted[c-1],d.edge_before&&d.edge_before.bv===$i){let _=u.edge_after,v=d.edge_before,w=e.getChain(_,v);xr(r.int_points2[u.id],r.int_points2[d.id],w),w.forEach(y=>n.edges.add(y)),w=w.reverse().map(y=>new h.Edge(y.shape.reverse()));for(let y=0;y<w.length-1;y++)w[y].next=w[y+1],w[y+1].prev=w[y];xr(r.int_points2[d.id],r.int_points2[u.id],w),w.forEach(y=>n.edges.add(y))}return n.recreateFaces(),n}cutWithLine(e){let n=new ye([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((u,d)=>d.area()-u.area());let n=[...e[0].faces][0].orientation(),r=e.filter(u=>[...u.faces][0].orientation()===n);for(let u of e){let d=[...u.faces][0];if(d.orientation()!==n){for(let c of r)if(d.shapes.every(_=>c.contains(_))){c.addFace(d.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof h.Point){let n=ci(this,e);return n===$i||n===Ft}else return oo(this,e)}distanceTo(e){if(e instanceof h.Point){let[n,r]=h.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Circle||e instanceof h.Line||e instanceof h.Segment||e instanceof h.Arc){let[n,r]=h.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof h.Polygon){let n=[Number.POSITIVE_INFINITY,new h.Segment],r,u;for(let d of this.edges){let c=n[0];[r,u]=h.Distance.shape2planarSet(d.shape,e.edges,c),h.Utils.LT(r,c)&&(n=[r,u])}return n}}intersect(e){if(e instanceof h.Point)return this.contains(e)?[e]:[];if(e instanceof h.Line)return vi(e,this);if(e instanceof h.Ray)return Kr(e,this);if(e instanceof h.Circle)return Gr(e,this);if(e instanceof h.Segment)return Jn(e,this);if(e instanceof h.Arc)return Xn(e,this);if(e instanceof h.Polygon)return vh(e,this);if(e instanceof h.Multiline)return gh(e,this)}translate(e){let n=new Me;for(let r of this.faces)n.addFace(r.shapes.map(u=>u.translate(e)));return n}rotate(e=0,n=new h.Point){let r=new Me;for(let u of this.faces)r.addFace(u.shapes.map(d=>d.rotate(e,n)));return r}scale(e,n){let r=new Me;for(let u of this.faces)r.addFace(u.shapes.map(d=>d.scale(e,n)));return r}transform(e=new h.Matrix){let n=new Me;for(let r of this.faces)n.addFace(r.shapes.map(u=>u.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${ge({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};h.Polygon=dl;const pl=(...a)=>new h.Polygon(...a);h.polygon=pl;const{Circle:Bn,Line:Er,Point:Ir,Vector:Wi,Utils:Rn}=h;class pi{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new Wi(e.pc,n),u=e.r*e.r,d=r.dot(r);return Rn.EQ_0(d)?new Ir(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(u/d))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(Rn.EQ(r,n.r)){let u=e.r*e.r/(2*n.r),d=new Wi(e.pc,n.pc);d=d.normalize();let c=e.pc.translate(d.multiply(u));return new Er(c,d)}else{let u=new Wi(e.pc,n.pc),d=e.r*e.r/(u.dot(u)-n.r*n.r),c=e.pc.translate(u.multiply(d)),_=Math.abs(d)*n.r;return new Bn(c,_)}}static inverseLine(e,n){const[r,u]=e.pc.distanceTo(n);if(Rn.EQ_0(r))return n.clone();{let d=e.r*e.r/(2*r),c=new Wi(e.pc,u.end);return c=c.multiply(d/r),new Bn(e.pc.translate(c),d)}}inverse(e){if(e instanceof Ir)return pi.inversePoint(this.circle,e);if(e instanceof Bn)return pi.inverseCircle(this.circle,e);if(e instanceof Er)return pi.inverseLine(this.circle,e)}}h.Inversion=pi;const _l=a=>new h.Inversion(a);h.inversion=_l;class S{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new h.Vector(e,r).length,new h.Segment(e,r)]}static point2circle(e,n){let[r,u]=e.distanceTo(n.center);if(h.Utils.EQ_0(r))return[n.r,new h.Segment(e,n.toArc().start)];{let d=Math.abs(r-n.r),c=new h.Vector(n.pc,e).normalize().multiply(n.r),_=n.pc.translate(c);return[d,new h.Segment(e,_)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return S.point2point(e,n.start);let r=new h.Vector(n.start,n.end),u=new h.Vector(n.start,e),d=new h.Vector(n.end,e),c=r.dot(u),_=-r.dot(d),v,w;if(h.Utils.GE(c,0)&&h.Utils.GE(_,0)){let y=n.tangentInStart();return v=Math.abs(y.cross(u)),w=n.start.translate(y.multiply(y.dot(u))),[v,new h.Segment(e,w)]}else return c<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new h.Circle(n.pc,n.r),u=[],d,c;return[d,c]=S.point2circle(e,r),c.end.on(n)&&u.push(S.point2circle(e,r)),u.push(S.point2point(e,n.start)),u.push(S.point2point(e,n.end)),S.sort(u),u[0]}static point2edge(e,n){return n.shape instanceof h.Segment?S.point2segment(e,n.shape):S.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=[];return u.push(S.point2line(e.start,n)),u.push(S.point2line(e.end,n)),S.sort(u),u[0]}static segment2segment(e,n){let r=Ki(e,n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=[],d,c;return[d,c]=S.point2segment(n.start,e),u.push([d,c.reverse()]),[d,c]=S.point2segment(n.end,e),u.push([d,c.reverse()]),u.push(S.point2segment(e.start,n)),u.push(S.point2segment(e.end,n)),S.sort(u),u[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=new h.Line(e.ps,e.pe),[d,c]=S.point2line(n.center,u);if(h.Utils.GE(d,n.r)&&c.end.on(e))return S.point2circle(c.end,n);{let[_,v]=S.point2circle(e.start,n),[w,y]=S.point2circle(e.end,n);return h.Utils.LT(_,w)?[_,v]:[w,y]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=new h.Line(e.ps,e.pe),d=new h.Circle(n.pc,n.r),[c,_]=S.point2line(d.center,u);if(h.Utils.GE(c,d.r)&&_.end.on(e)){let[T,C]=S.point2circle(_.end,d);if(C.end.on(n))return[T,C]}let v=[];v.push(S.point2arc(e.start,n)),v.push(S.point2arc(e.end,n));let w,y;return[w,y]=S.point2segment(n.start,e),v.push([w,y.reverse()]),[w,y]=S.point2segment(n.end,e),v.push([w,y.reverse()]),S.sort(v),v[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let u=e.toArc(),d=n.toArc();return S.point2point(u.start,d.start)}else{let u=new h.Line(e.center,n.center),d=u.intersect(e),c=u.intersect(n),_=[];return _.push(S.point2point(d[0],c[0])),_.push(S.point2point(d[0],c[1])),_.push(S.point2point(d[1],c[0])),_.push(S.point2point(d[1],c[1])),S.sort(_),_[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let[u,d]=S.point2line(e.center,n),[c,_]=S.point2circle(d.end,e);return _=_.reverse(),[c,_]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=new h.Circle(e.center,e.r),[d,c]=S.point2line(u.center,n);if(h.Utils.GE(d,u.r)){let[_,v]=S.point2circle(c.end,u);if(v.end.on(e))return[_,v]}else{let _=[];return _.push(S.point2line(e.start,n)),_.push(S.point2line(e.end,n)),S.sort(_),_[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=new h.Circle(e.center,e.r),[d,c]=S.circle2circle(u,n);if(c.start.on(e))return[d,c];{let _=[];return _.push(S.point2circle(e.start,n)),_.push(S.point2circle(e.end,n)),S.sort(_),_[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new h.Segment(r[0],r[0])];let u=new h.Circle(e.center,e.r),d=new h.Circle(n.center,n.r),[c,_]=S.circle2circle(u,d);if(_.start.on(e)&&_.end.on(n))return[c,_];{let v=[],w,y;return[w,y]=S.point2arc(e.start,n),y.end.on(n)&&v.push([w,y]),[w,y]=S.point2arc(e.end,n),y.end.on(n)&&v.push([w,y]),[w,y]=S.point2arc(n.start,e),y.end.on(e)&&v.push([w,y.reverse()]),[w,y]=S.point2arc(n.end,e),y.end.on(e)&&v.push([w,y.reverse()]),[w,y]=S.point2point(e.start,n.start),v.push([w,y]),[w,y]=S.point2point(e.start,n.end),v.push([w,y]),[w,y]=S.point2point(e.end,n.start),v.push([w,y]),[w,y]=S.point2point(e.end,n.end),v.push([w,y]),S.sort(v),v[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new h.Segment];for(let u of n.edges){let[d,c]=S.point2edge(e,u);h.Utils.LT(d,r[0])&&(r=[d,c])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new h.Segment];for(let u of n.edges){let[d,c]=e.distanceTo(u.shape);h.Utils.LT(d,r[0])&&(r=[d,c])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new h.Segment];for(let u of e.edges)for(let d of n.edges){let[c,_]=u.shape.distanceTo(d.shape);h.Utils.LT(c,r[0])&&(r=[c,_])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),u=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),d=r*r+u*u,c=e.merge(n),_=c.xmax-c.xmin,v=c.ymax-c.ymin,w=_*_+v*v;return[d,w]}static minmax_tree_process_level(e,n,r,u){let d,c;for(let y of n)[d,c]=S.box2box_minmax(e.box,y.item.key),y.item.value instanceof h.Edge?u.insert([d,c],y.item.value.shape):u.insert([d,c],y.item.value),h.Utils.LT(c,r)&&(r=c);if(n.length===0)return r;let _=n.map(y=>y.left.isNil()?void 0:y.left).filter(y=>y!==void 0),v=n.map(y=>y.right.isNil()?void 0:y.right).filter(y=>y!==void 0),w=[..._,...v].filter(y=>{let[T,C]=S.box2box_minmax(e.box,y.max);return h.Utils.LE(T,r)});return r=S.minmax_tree_process_level(e,w,r,u),r}static minmax_tree(e,n,r){let u=new mi,d=[n.index.root],c=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return c=S.minmax_tree_process_level(e,d,c,u),u}static minmax_tree_calc_distance(e,n,r){let u,d;if(n!=null&&!n.isNil()){if([u,d]=S.minmax_tree_calc_distance(e,n.left,r),d)return[u,d];if(h.Utils.LT(u[0],Math.sqrt(n.item.key.low)))return[u,!0];let[c,_]=S.distance(e,n.item.value);return h.Utils.LT(c,u[0])&&(u=[c,_]),[u,d]=S.minmax_tree_calc_distance(e,n.right,u),[u,d]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let u=[r,new h.Segment],d=!1;if(n instanceof h.PlanarSet){let c=S.minmax_tree(e,n,r);[u,d]=S.minmax_tree_calc_distance(e,c.root,u)}return u}static sort(e){e.sort((n,r)=>h.Utils.LT(n[0],r[0])?-1:h.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new h.Segment];for(let u of n){let[d,c]=S.distance(e,u.shape);h.Utils.LT(d,r[0])&&(r=[d,c])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new h.Segment];for(let u of e)for(let d of n){let[c,_]=S.distance(u.shape,d.shape);h.Utils.LT(c,r[0])&&(r=[c,_])}return r}}h.Distance=S;const{Multiline:ml,Point:uo,Segment:gl,Polygon:co}=h;function ss(a){return new uo(a.split(" ").map(Number))}function fo(a){return a.split(", ").map(ss)}function rs(a){const e=fo(a);let n=[];for(let r=0;r<e.length-1;r++)n.push(new gl(e[r],e[r+1]));return new ml(n)}function vl(a){return a.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(rs)}function po(a){const e=a.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new co;let r;return e.forEach((u,d)=>{let c=u.split(", ").map(v=>new uo(v.split(" ").map(Number)));const _=n.addFace(c);d===0?r=_.orientation():_.orientation()===r&&_.reverse()}),n}function yl(a){const e=a.split(/\)\), \(\(/).map(r=>"(("+r+"))").map(po),n=new co;return e.reduce((r,u)=>[...r,...u?.faces],[]).forEach(r=>n.addFace([...r?.shapes])),n}function xl(a){if(a.startsWith("POLYGON")){const e=a.replace(/^POLYGON /,"");return po(e)}else{const e=a.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return yl(e)}}function wl(a){return a.split(`
`).map(e=>e.match(/\(([^)]+)\)/)[1]).map(ss)}function Pl(a){return a.split(`
`).map(e=>e.match(/\(([^)]+)\)/)[1]).map(rs).reduce((e,n)=>[...e,...n],[])}function _o(a){if(a.startsWith("POINT")){const e=a.replace(/^POINT \(/,"").replace(/\)$/,"");return ss(e)}else if(a.startsWith("MULTIPOINT")){const e=a.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return fo(e)}else if(a.startsWith("LINESTRING")){const e=a.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return rs(e)}else if(a.startsWith("MULTILINESTRING")){const e=a.replace(/^MULTILINESTRING /,"");return vl(e)}else{if(a.startsWith("POLYGON")||a.startsWith("MULTIPOLYGON"))return xl(a);if(a.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=a.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(_o).map(r=>r instanceof Array?r:[r]).reduce((r,u)=>[...r,...u],[])}else{if(mo(a))return wl(a);if(go(a))return Pl(a)}}return[]}function mo(a){return a.split(`
`)?.every(e=>e.includes("POINT"))}function go(a){return a.split(`
`)?.every(e=>e.includes("LINESTRING"))}function Tl(a){return a.startsWith("POINT")||mo(a)||a.startsWith("LINESTRING")||go(a)||a.startsWith("MULTILINESTRING")||a.startsWith("POLYGON")||a.startsWith("MULTIPOINT")||a.startsWith("MULTIPOLYGON")||a.startsWith("GEOMETRYCOLLECTION")}h.isWktString=Tl;h.parseWKT=_o;h.BooleanOperations=Nh;h.Relations=Yh;const Ar=h.Matrix,Vi=24,Zn=60,ke=class xt extends wt.Path{constructor(e,n){if(super(),wt.Util.setOptions(this,n),e==null)throw Error("latLng required");n=n||{},this._latLng=Re.latLng(e),this._heading=n.heading,this._course=n.course,this._speed=n.speed,this._shapeOptions=n.shapeOptions||{leaderTime:Zn,defaultShapeSet:xt.DEFAULT_SHAPE_SET},this._setShapeOptions(n.shapeOptions)}_project(){this._currentShapePoints=this._getProjectedShapePoints(),this._currentLeaderPoints=this._getLeaderShapePoints();const e=new wt.Bounds;for(let n=0;n<this._currentShapePoints.length;n++){const r=this._currentShapePoints[n];e.extend(r)}if(this._currentLeaderPoints!==void 0)for(let n=0;n<this._currentLeaderPoints.length;n++){const r=this._currentShapePoints[n];e.extend(r)}this._currentBounds=e,this._currentLatLngBounds=new wt.LatLngBounds(this._map.layerPointToLatLng(e.getBottomLeft()),this._map.layerPointToLatLng(e.getTopRight()))}_update(){if(!this._map)return;const e=this.getElement();if(e===void 0)return;const n=[];this._currentShapePoints!==void 0&&n.push(xt._toSVGPath(this._currentShapePoints,!0)),this._currentLeaderPoints!==void 0&&n.push(xt._toSVGPath(this._currentLeaderPoints,!1));const r=n.join(" ");e.setAttribute("d",r)}_setShapeOptions(e){this._shapeOptions=e||{leaderTime:Zn,defaultShapeSet:xt.DEFAULT_SHAPE_SET},this._shapeOptions.leaderTime===void 0&&(this._shapeOptions.leaderTime=Zn),this._shapeOptions.defaultShapeSet===void 0&&(this._shapeOptions.defaultShapeSet=xt.DEFAULT_SHAPE_SET),this._shapeOptions.shapeSetEntries!==void 0&&this._shapeOptions.shapeSetEntries.sort((n,r)=>r.minZoomLevel-n.minZoomLevel)}setLatLng(e){const n=this._latLng;return this._latLng=Re.latLng(e),this.fire("move",{oldLatLng:n,latlng:this._latLng}),this.redraw()}setHeading(e){return this._heading=e,this.redraw()}setCourse(e){return this._course=e,this.redraw()}setSpeed(e){return this._speed=e,this.redraw()}setShapeOptions(e){return this._setShapeOptions(e),this.redraw()}getBounds(){return this._currentLatLngBounds}getLatLng(){return this._latLng}getSpeed(){return this._speed}getHeading(){return this._heading}getCourse(){return this._course}static createShape(e,n){return{points:e,length:n,breadth:n,units:"pixels"}}static createShapeSet(e){return{withHeading:xt.createShape(xt.DEFAULT_HEADING_SHAPE_POINTS,e),withoutHeading:xt.createShape(xt.DEFAULT_NOHEADING_SHAPE_POINTS,e)}}_getLatSizeOf(e){return e/40075017*360}_getLngSizeOf(e){return e/40075017*360/Math.cos(Math.PI/180*this._latLng.lat)}_getViewAngleFromModel(e){return e-Math.PI/2}_getLeaderShapePoints(){if(this._course===void 0||this._speed===void 0||this._shapeOptions===void 0||this._shapeOptions.leaderTime===void 0)return;const e=this._getViewAngleFromModel(this._course),n=this._speed*this._shapeOptions.leaderTime,r=this._calcRelativeLatLng(this._latLng,n,e);return this._latLngsToLayerPoints(this._latLng,r)}_calcRelativeLatLng(e,n,r){return new wt.LatLng(e.lat-this._getLatSizeOf(n*Math.sin(r)),e.lng+this._getLngSizeOf(n*Math.cos(r)))}_latLngsToLayerPoints(...e){return e.map(n=>this._map.latLngToLayerPoint(n))}_getShapeSet(){if(this._shapeOptions.shapeSetEntries===void 0||this._shapeOptions.shapeSetEntries.length==0)return this._shapeOptions.defaultShapeSet?this._shapeOptions.defaultShapeSet:xt.DEFAULT_SHAPE_SET;const e=this._map.getZoom(),n=this._shapeOptions.shapeSetEntries.sort((r,u)=>u.minZoomLevel-r.minZoomLevel).filter(r=>e>=r.minZoomLevel);return n.length>0?n[0].shapeSet:this._shapeOptions.defaultShapeSet?this._shapeOptions.defaultShapeSet:xt.DEFAULT_SHAPE_SET}_getShape(){const e=this._getShapeSet();return this._heading!==void 0?e.withHeading:e.withoutHeading}_getTransformedShapePoints(){const e=this._getShape();let n=new Ar;if(this._heading!==void 0){const r=this._getViewAngleFromModel(this._heading);n=n.rotate(r)}return e.center!==void 0&&(n=n.translate(-e.center[0],-e.center[1])),n=n.scale(e.length,e.breadth),[e.points.map(r=>n.transform(r)),e.units]}_getProjectedShapePoints(){const[e,n]=this._getTransformedShapePoints();switch(n){case"pixels":{const r=this._map.latLngToLayerPoint(this._latLng),u=new Ar().translate(r.x,r.y);return e.map(d=>{const c=u.transform(d);return new wt.Point(c[0],c[1])})}case"meters":return e.map(r=>this._map.latLngToLayerPoint(new wt.LatLng(this._latLng.lat-this._getLatSizeOf(r[1]),this._latLng.lng+this._getLngSizeOf(r[0]))));default:throw new Error(`unsupported units: ${n}`)}}static _toSVGPath(e,n){let r="";for(let u=0;u<e.length;u++){const d=e[u];r===""?r=`M ${d.x} ${d.y} `:r+=`L ${d.x} ${d.y} `}return n&&(r+="Z"),r}};ke.DEFAULT_HEADING_SHAPE_POINTS=[[.75,0],[-.25,.3],[-.25,-.3]],ke.DEFAULT_NOHEADING_SHAPE_POINTS=[[.3,0],[0,.3],[-.3,0],[0,-.3]],ke.DEFAULT_SHAPE_SET={withHeading:{points:ke.DEFAULT_HEADING_SHAPE_POINTS,length:Vi,breadth:Vi,units:"pixels"},withoutHeading:{points:ke.DEFAULT_NOHEADING_SHAPE_POINTS,length:Vi,breadth:Vi,units:"pixels"}};let Et=ke;const Ll=24,bl=14,Sl=60,El=1.944,Or=102.3,Il=360,Al=360,vo="#000000",yo="#d3d3d3",bt="#000000",St="#d3d3d3",re="#8b008b",oe="#ff00ff",Mt="#00008b",kt="#ffff00",Xt="#008b8b",te="#00ffff",Nt="#00008b",zt="#0000ff",Bt="#006400",Rt="#90ee90",Zt="#8b0000",Dt="#ff0000",Ut="#008b8b",Ht="#00ffff",Cr={0:P("Not available",bt,St),20:P("Wing in ground (WIG), all ships of this type",bt,St),21:P("Wing in ground (WIG), Hazardous category A",bt,St),22:P("Wing in ground (WIG), Hazardous category B",bt,St),23:P("Wing in ground (WIG), Hazardous category C",bt,St),24:P("Wing in ground (WIG), Hazardous category D",bt,St),25:P("Wing in ground (WIG), Reserved for future use",bt,St),26:P("Wing in ground (WIG), Reserved for future use",bt,St),27:P("Wing in ground (WIG), Reserved for future use",bt,St),28:P("Wing in ground (WIG), Reserved for future use",bt,St),29:P("Wing in ground (WIG), Reserved for future use",bt,St),30:P("Fishing",re,oe),31:P("Towing",re,oe),32:P("Towing: length exceeds 200m or breadth exceeds 25m",re,oe),33:P("Dredging or underwater ops",re,oe),34:P("Diving ops",re,oe),35:P("Military ops",re,oe),36:P("Sailing",re,oe),37:P("Pleasure Craft",re,oe),40:P("High speed craft (HSC), all ships of this type",Mt,kt),41:P("High speed craft (HSC), Hazardous category A",Mt,kt),42:P("High speed craft (HSC), Hazardous category B",Mt,kt),43:P("High speed craft (HSC), Hazardous category C",Mt,kt),44:P("High speed craft (HSC), Hazardous category D",Mt,kt),45:P("High speed craft (HSC), Reserved for future use",Mt,kt),46:P("High speed craft (HSC), Reserved for future use",Mt,kt),47:P("High speed craft (HSC), Reserved for future use",Mt,kt),48:P("High speed craft (HSC), Reserved for future use",Mt,kt),49:P("High speed craft (HSC), No additional information",Mt,kt),50:P("Pilot Vessel",Xt,te),51:P("Search and Rescue vessel",Xt,te),52:P("Tug",Xt,te),53:P("Port Tender",Xt,te),54:P("Anti-pollution equipment",Xt,te),55:P("Law Enforcement",Xt,te),56:P("Spare - Local Vessel",Xt,te),57:P("Spare - Local Vessel",Xt,te),58:P("Medical Transport",Xt,te),59:P("Noncombatant ship according to RR Resolution No. 18","",""),60:P("Passenger, all ships of this type",Nt,zt),61:P("Passenger, Hazardous category A",Nt,zt),62:P("Passenger, Hazardous category B",Nt,zt),63:P("Passenger, Hazardous category C",Nt,zt),64:P("Passenger, Hazardous category D",Nt,zt),65:P("Passenger, Reserved for future use",Nt,zt),66:P("Passenger, Reserved for future use",Nt,zt),67:P("Passenger, Reserved for future use",Nt,zt),68:P("Passenger, Reserved for future use",Nt,zt),69:P("Passenger, No additional information",Nt,zt),70:P("Cargo, all ships of this type",Bt,Rt),71:P("Cargo, Hazardous category A",Bt,Rt),72:P("Cargo, Hazardous category B",Bt,Rt),73:P("Cargo, Hazardous category C",Bt,Rt),74:P("Cargo, Hazardous category D",Bt,Rt),75:P("Cargo, Reserved for future use",Bt,Rt),76:P("Cargo, Reserved for future use",Bt,Rt),77:P("Cargo, Reserved for future use",Bt,Rt),78:P("Cargo, Reserved for future use",Bt,Rt),79:P("Cargo, No additional information",Bt,Rt),80:P("Tanker, all ships of this type",Zt,Dt),81:P("Tanker, Hazardous category A",Zt,Dt),82:P("Tanker, Hazardous category B",Zt,Dt),83:P("Tanker, Hazardous category C",Zt,Dt),84:P("Tanker, Hazardous category D",Zt,Dt),85:P("Tanker, Reserved for future use",Zt,Dt),86:P("Tanker, Reserved for future use",Zt,Dt),87:P("Tanker, Reserved for future use",Zt,Dt),88:P("Tanker, Reserved for future use",Zt,Dt),89:P("Tanker, No additional information",Zt,Dt),90:P("Other Type, all ships of this type",Ut,Ht),91:P("Other Type, Hazardous category A",Ut,Ht),92:P("Other Type, Hazardous category B",Ut,Ht),93:P("Other Type, Hazardous category C",Ut,Ht),94:P("Other Type, Hazardous category D",Ut,Ht),95:P("Other Type, Reserved for future use",Ut,Ht),96:P("Other Type, Reserved for future use",Ut,Ht),97:P("Other Type, Reserved for future use",Ut,Ht),98:P("Other Type, Reserved for future use",Ut,Ht),99:P("Other Type, no additional information",Ut,Ht)},Ol=P("Reserved",vo,yo),Cl=P("Unknown",vo,yo),xo=class qi extends Et{constructor(e,n){super([e.latitude,e.longitude],n),wt.Util.setOptions(this,n),n=n||{},this._leaderTime=n.leaderTime||Sl,this._minZoomLevel=n.minZoomLevel||bl,this._size=n.size||Ll,this._positionReport=e,this.setPositionReport(e),this.setShipStaticData(n.shipStaticData)}static etaFromDate(e){if(e!=null)return{month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes()}}setPositionReport(e){return this._positionReport=e,this.setLatLng([e.latitude,e.longitude]),e.trueHeading!==null&&e.trueHeading!==void 0&&e.trueHeading<Al?this.setHeading(Mr(e.trueHeading)):this.setHeading(void 0),e.cog!==null&&e.cog!==void 0&&e.cog<Il?this.setCourse(Mr(e.cog)):this.setCourse(void 0),e.sog!==null&&e.sog!==void 0&&e.sog<Or?this.setSpeed(e.sog/El):this.setSpeed(void 0),this.bindPopup(this._getPopupContent(this._positionReport,this._shipStaticData)),this.redraw()}setShipStaticData(e){this._shipStaticData=e;const n=wo(e?.type);return this.setStyle({color:n.color,fill:!0,fillOpacity:1,fillColor:n.fillColor}),this.bindPopup(this._getPopupContent(this._positionReport,this._shipStaticData)),this.setShapeOptions(qi._getShapeOptions(this._leaderTime,this._minZoomLevel,this._size,e))}static _getShapeOptions(e,n,r,u){const d={leaderTime:e,defaultShapeSet:Et.createShapeSet(r)},c=qi._getShapeSet(r,u);return c!==null&&(d.shapeSetEntries=[{shapeSet:c,minZoomLevel:n}]),d}static _getShapeSet(e,n){return n==null||n.dimension===null||n.dimension===void 0||!kr(n.dimension)?null:{withHeading:{points:qi.DEFAULT_SILHOUETTE_SHAPE_POINTS,center:[n.dimension.B,n.dimension.D],length:n.dimension.A+n.dimension.B,breadth:n.dimension.C+n.dimension.D,units:"meters"},withoutHeading:Et.createShape(Et.DEFAULT_NOHEADING_SHAPE_POINTS,e)}}_getPopupContent(e,n){let r="<table>";n!=null&&(r+=rt("User ID",n.userId),r+=rt("IMO Number",n.imoNumber),r+=rt("Call sign",n.callSign),r+=rt("Name",n.name)),e!=null&&(r+=rt("Location",`${Oe(e.latitude,5)}, ${Oe(e.longitude,5)}`),r+=rt("SOG",Oe(e.sog,2,d=>d<Or),"knots"),r+=rt("COG",Oe(e.cog,1),"°"),r+=rt("Heading",Oe(e.trueHeading,1),"°"),r+=rt("Navigation status",Nl(e.navigationalStatus))),n!=null&&(r+=rt("Type",Ml(n.type)),n.dimension!==null&&n.dimension!==void 0&&kr(n.dimension)&&(r+=rt("Ship length",n.dimension.A+n.dimension.B,"m"),r+=rt("Ship width",n.dimension.C+n.dimension.D,"m")),r+=rt("Fix type",kl(n.fixType)),r+=rt("ETA",zl(n.eta)),r+=rt("Maximum static draught",Oe(n.maximumStaticDraught,1),"m"),r+=rt("Destination",n.destination),r+=rt("DTE",n.dte)),r+="</table>";const u=wt.DomUtil.create("div");return u.innerHTML=r,u}};xo.DEFAULT_SILHOUETTE_SHAPE_POINTS=[[1,.5],[.75,1],[0,1],[0,0],[.75,0]];let tn=xo;function Oe(a,e,n){if(a!=null&&!(n&&!n(a)))return a.toFixed(e)}function Ml(a){return a==null?void 0:wo(a).name}function kl(a){if(a!=null)switch(a){case 0:return;case 1:return"GPS";case 2:return"GLONASS";case 3:return"combined GPS/GLONASS";case 4:return"Loran-C";case 5:return"Chayka";case 6:return"integrated navigation system";case 7:return"surveyed";case 8:return"Galileo";case 9:case 10:case 11:case 12:case 13:case 14:return`not used (${a})`;case 15:return"internal GNSS";default:return`unknown (${a})`}}function Nl(a){if(a!=null)switch(a){case 0:return"Under way using engine";case 1:return"At anchor";case 2:return"Not under command";case 3:return"Restricted manoeuverability";case 4:return"Constrained by her draught";case 5:return"Moored";case 6:return"Aground";case 7:return"Engaged in Fishing";case 8:return"Under way sailing";case 9:return"Reserved for future amendment of Navigational Status for HSC";case 10:return"Reserved for future amendment of Navigational Status for WIG";case 11:return"Reserved for future use";case 12:return"Reserved for future use";case 13:return"Reserved for future use";case 14:return"AIS-SART is active";case 15:return"Not defined (default)";default:return`unknown (${a})`}}function zl(a){if(a==null)return;const e=[];if(!ze(a.month)&&!ze(a.day)&&e.push(`${a.month.toString().padStart(2,"0")}/${a.day.toString().padStart(2,"0")}`),!ze(a.hour)&&!ze(a.minute)&&e.push(`${a.hour.toString().padStart(2,"0")}:${a.minute.toString().padStart(2,"0")}`),e.length!==0)return`${e.join(" ")} UTC`}function Mr(a){if(a!=null)return a*Math.PI/180}function ze(a){return a==null}function kr(a){return a!=null&&a.A>0&&a.B>0&&a.C>0&&a.D>0}function rt(a,e,n){if(e==null)return"";const r=String(e);return`<tr><td>${a}</td><td>${r} ${ze(n)?"":n}</td></tr>`}function P(a,e,n){return{name:a,color:e,fillColor:n}}function wo(a){if(a==null)return Cr[0];if(a<0||a>99)return Cl;const e=Cr[a];return ze(e)?Ol:e}Re.trackSymbol=function(a,e){return new Et(a,e)};Re.TrackSymbol=Et;Re.aisTrackSymbol=function(a,e){return new tn(a,e)};Re.AISTrackSymbol=tn;function ji(a){if(a!=null)return a*Math.PI/180}const Pi=new wt.Map("map",{center:[1.251,103.826],zoom:13});new wt.TileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(Pi);const Po=new Et([1.229,103.813],{fill:!0,fillColor:"yellow",fillOpacity:1,heading:ji(320),course:ji(300),speed:5});Po.bindTooltip("TrackSymbol1");Po.addTo(Pi);const To=new Et([1.239,103.854],{fill:!0,fillColor:"red",fillOpacity:1,shapeOptions:{shapeSetEntries:[{shapeSet:{withHeading:{points:[[1,.5],[.75,1],[0,1],[0,0],[.75,0]],center:[30,40],length:110,breadth:60,units:"meters"},withoutHeading:Et.createShape(Et.DEFAULT_NOHEADING_SHAPE_POINTS,24)},minZoomLevel:14}],defaultShapeSet:Et.createShapeSet(24)},heading:ji(120),course:ji(100),speed:10});To.bindTooltip("TrackSymbol2");To.addTo(Pi);const Lo=new tn({latitude:1.221,longitude:103.82,trueHeading:320,cog:45,sog:2},{shipStaticData:{userId:123,imoNumber:456,callSign:"ABC",name:"ABC",type:31,dimension:{A:80,B:30,C:20,D:40},fixType:1,eta:{month:2,day:5,hour:15,minute:37},destination:"Singapore",dte:!0}});Lo.bindTooltip("AISTrackSymbol1");Lo.addTo(Pi);const bo=new tn({latitude:1.25,longitude:103.86,trueHeading:120,cog:240,sog:5});bo.bindTooltip("AISTrackSymbol2");bo.addTo(Pi);
